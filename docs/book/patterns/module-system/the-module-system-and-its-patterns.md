---
title: æ¨¡å—ç³»ç»Ÿå’Œæ¨¡å¼
---

æ­£å¦‚å‰é¢æ‰€è¯´ï¼Œæ¨¡å—æ˜¯æ„å»ºå¤§å‹åº”ç”¨ä»¥åŠé€šè¿‡å¯¼å‡ºå’Œä¸å¯¼å‡ºæ–¹å¼æš´éœ²å’Œéšè—ä¿¡æ¯çš„æ ¸å¿ƒã€‚

åœ¨äº†è§£CommonJSä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè®¨è®ºä¸€ç§å¸®åŠ©éšè—ä¿¡æ¯ï¼Œç”¨äºæ„å»ºç®€å•æ¨¡å—ç³»ç»Ÿçš„é€šç”¨æ¨¡å¼ - `revealing module pattern`(æ­éœ²æ¨¡å—æ¨¡å¼)ã€‚



## The revealing module pattern

æµè§ˆå™¨ä¸­çš„JSæœ€å¤§é—®é¢˜å°±æ˜¯ç¼ºå°‘å‘½åç©ºé—´ã€‚æ¯ä¸ªè„šæœ¬éƒ½è¿è¡Œåœ¨å…¨å±€ä½œç”¨äºã€‚è€Œåº”ç”¨å†…éƒ¨ä»£ç æˆ–ç¬¬ä¸‰æ–¹ä¾èµ–æš´éœ²å‡ºæ¥çš„åŠŸèƒ½ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸğŸ˜…ã€‚è¿™æ˜¯æå…¶æœ‰å®³çš„ã€‚å‡è®¾ï¼Œæœ‰ä¸ªç¬¬ä¸‰æ–¹åº“å®ä¾‹åŒ–ä¸€ä¸ªå…¨å±€å˜é‡ `utils`ï¼Œå¦‚æœåº”ç”¨ä»£ç è‡ªèº«ä¸å°å¿ƒæ”¹å˜æˆ–è¦†ç›–äº†è¯¥ `utils`ï¼Œè¿™å°±å¯èƒ½å¯¼è‡´ä¸å¯é¢„çŸ¥çš„é”™è¯¯ã€‚

::: tip

ç®€è€Œè¨€ä¹‹ï¼Œä¾èµ–å…¨å±€ä½œç”¨åŸŸæ˜¯ä¸€ä»¶æå…¶å±é™©çš„äº‹ã€‚å°¤å…¶æ˜¯å½“ä»£ç è¶Šæ¥è¶Šå¤æ‚ï¼Œä¾èµ–è¶Šæ¥è¶Šå¤šæ—¶ã€‚

:::

ä¸€ç§è§£å†³è¿™ç±»é—®é¢˜æ¯”è¾ƒæµè¡Œçš„æŠ€æœ¯ç§°ä¹‹ä¸º `æ­éœ²æ¨¡å—æ¨¡å¼`ï¼Œçœ‹èµ·æ¥å¦‚ä¸‹ï¼š

```typescript {3,7}
// IIFE
const myModule = (() => {
  // ç§æœ‰ä¿¡æ¯
  const privateFoo = () => {}
  const privateBar = []
  
  // æš´éœ²ç»™å¤–ç•Œçš„ä¿¡æ¯
  const exported = {
    publicFoo: () => {},
    publicBar: () => {}
  }
  
  return exported
})()

console.log(myModule)
console.log(myModule.privateFoo, myModule.privateBar)
```

æ‰“å°ç»“æœï¼š

```bash
{ publicFoo: [Function: publicFoo],
  publicBar: [Function: publicBar] }
undefined undefined
```



è¿™ç§æ¨¡å¼åˆ©ç”¨è‡ªè°ƒç”¨å‡½æ•°ã€‚

::: tip

`IIFE`(Immediately Invoked Function Expression) ç”¨äºåˆ›å»ºç§æœ‰ä½œç”¨åŸŸï¼Œåªå¯¼å‡ºå…¬å…±éƒ¨åˆ†ã€‚

åœ¨JSä¸­ï¼Œå‡½æ•°å†…åˆ›å»ºçš„å˜é‡å¤–éƒ¨ä½œç”¨åŸŸæ˜¯æ— æ³•è®¿é—®çš„ã€‚å‡½æ•°å¯ä»¥ä½¿ç”¨ `return` è¯­å¥é€‰æ‹©æ€§çš„å‘å¤–éƒ¨ä½œç”¨åŸŸæš´éœ²ä¿¡æ¯ã€‚

ğŸ“šè¿™ä¸ªæ¨¡å¼æœ¬è´¨ä¸Šå°±æ˜¯éšè—ç§æœ‰ä¿¡æ¯ï¼Œåªæš´éœ²å…¬å¼€APIã€‚

:::

è¿™ç§æ€æƒ³æ­£æ˜¯CommonJSæ¨¡å—ç³»ç»Ÿçš„åŸºçŸ³ğŸ˜ã€‚



2022å¹´09æœˆ25æ—¥12:26:08

