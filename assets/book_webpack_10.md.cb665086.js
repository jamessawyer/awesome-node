import{_ as s,c as a,o as n,N as l}from"./chunks/framework.7812daa2.js";const p="/awesome-node/assets/10-1.258418bb.webp",o="/awesome-node/assets/10-2.79b9b377.webp",e="/awesome-node/assets/10-3.df551081.webp",t="/awesome-node/assets/10-4.6ac63731.webp",c="/awesome-node/assets/10-5.8eef5fb1.webp",h=JSON.parse('{"title":"å›¾åƒåŠ è½½åŸç†å’Œæœ€ä½³å®è·µ","description":"","frontmatter":{"title":"å›¾åƒåŠ è½½åŸç†å’Œæœ€ä½³å®è·µ"},"headers":[],"relativePath":"book/webpack/10.md","lastUpdated":1681121284000}'),r={name:"book/webpack/10.md"},D=l(`<p>å›¾å½¢å›¾åƒèµ„æºæ˜¯å½“ä»£ Web åº”ç”¨çš„æœ€å¸¸ç”¨ã€å®æƒ çš„å†…å®¹ã€è£…é¥°å…ƒç´ ä¹‹ä¸€ï¼Œä½†åœ¨ Webpack å‡ºç°ä¹‹å‰å¯¹å›¾åƒèµ„æºçš„å¤„ç†å¤æ‚åº¦ç‰¹åˆ«é«˜ï¼Œéœ€è¦å€ŸåŠ©ä¸€ç³»åˆ—å·¥å…·(ç”šè‡³ PhotoShop)å®Œæˆå‹ç¼©ã€é›ªç¢§å›¾ã€hashã€éƒ¨ç½²ç­‰æ“ä½œã€‚</p><p>è€Œåœ¨ Webpack ä¸­ï¼Œå›¾åƒä»¥åŠå…¶å®ƒå¤šåª’ä½“èµ„æºéƒ½è¢«æå‡ä¸ºä¸€ç­‰å…¬æ°‘ â€”â€” èƒ½å¤Ÿåƒå¼•ç”¨æ™®é€š JavaScript æ¨¡å—ä¸€æ ·é€šè¿‡ <code>import/require</code> è¯­å¥å¯¼å…¥èµ„æºæ¨¡å—ï¼Œè¿™ç§å¼€å‘æ¨¡å¼å…è®¸æˆ‘ä»¬å°†å›¾åƒç›¸å…³çš„å¤„ç†åˆå…¥ç»Ÿä¸€çš„å¿ƒæ™ºæ¨¡å‹ä¸­ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚</p><p>æœ¬æ–‡å°†é›†ä¸­ä»‹ç» Webpack ä½“ç³»ä¸‹å¤„ç†å›¾åƒèµ„æºçš„å¸¸è§æ–¹æ³•ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>å¦‚ä½•ä½¿ç”¨é€‚å½“çš„ Loader å¤„ç†å›¾åƒèµ„æºï¼›</li><li>å¦‚ä½•å€ŸåŠ© Loader æˆ–æ’ä»¶å®ç°å›¾åƒä¼˜åŒ–ï¼ŒåŒ…æ‹¬å‹ç¼©ã€é›ªç¢§å›¾ã€å“åº”å¼å›¾ç‰‡ã€‚</li></ul><h2 id="åœ¨-webpack-4-ä¸­å¯¼å…¥å›¾åƒ" tabindex="-1">åœ¨ Webpack 4 ä¸­å¯¼å…¥å›¾åƒ <a class="header-anchor" href="#åœ¨-webpack-4-ä¸­å¯¼å…¥å›¾åƒ" aria-label="Permalink to &quot;åœ¨ Webpack 4 ä¸­å¯¼å…¥å›¾åƒ&quot;">â€‹</a></h2><p>åŸç”Ÿ Webpack 4 åªèƒ½å¤„ç†æ ‡å‡† JavaScript æ¨¡å—ï¼Œå› æ­¤éœ€è¦å€ŸåŠ© Loader â€”â€” ä¾‹å¦‚ <code>file-loader</code>ã€<code>url-loader</code>ã€<code>raw-loader</code> ç­‰å®Œæˆå›¾åƒåŠ è½½æ“ä½œï¼Œå®è·µä¸­æˆ‘ä»¬é€šå¸¸éœ€è¦æŒ‰èµ„æºç±»å‹é€‰æ‹©é€‚å½“åŠ è½½å™¨ï¼Œç®€å•ä»‹ç»</p><h3 id="file-loader" tabindex="-1">file-loader <a class="header-anchor" href="#file-loader" aria-label="Permalink to &quot;file-loader&quot;">â€‹</a></h3><p><a href="https://v4.webpack.js.org/loaders/file-loader/" target="_blank" rel="noreferrer">file-loader</a>ï¼šå°†å›¾åƒå¼•ç”¨è½¬æ¢ä¸º url è¯­å¥å¹¶ç”Ÿæˆç›¸åº”å›¾ç‰‡æ–‡ä»¶ï¼Œä¾‹å¦‚ä½¿ç”¨å¦‚ä¸‹é…ç½®ï¼š</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-FSN3-" id="tab-2Jq5vDD" checked="checked"><label for="tab-2Jq5vDD">webpack.config.js</label></div><div class="blocks"><div class="language-js active"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#89DDFF;">(</span><span style="color:#C3E88D;">png</span><span style="color:#89DDFF;">|</span><span style="color:#C3E88D;">jpe</span><span style="color:#89DDFF;">?</span><span style="color:#C3E88D;">g</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">file-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></div></div><p>ç»è¿‡ <code>file-loader</code> å¤„ç†åï¼ŒåŸå§‹å›¾ç‰‡ä¼šè¢«é‡å‘½åå¹¶å¤åˆ¶åˆ°äº§ç‰©æ–‡ä»¶å¤¹ï¼ŒåŒæ—¶åœ¨ä»£ç ä¸­æ’å…¥å›¾ç‰‡ URL åœ°å€ï¼Œå½¢å¦‚ï¼š</p><p><img src="`+p+`" alt="file-loader"></p><h3 id="url-loader" tabindex="-1">url-loader <a class="header-anchor" href="#url-loader" aria-label="Permalink to &quot;url-loader&quot;">â€‹</a></h3><p><a href="https://v4.webpack.js.org/loaders/url-loader/" target="_blank" rel="noreferrer">url-loader</a>ï¼šæœ‰ä¸¤ç§è¡¨ç°ï¼Œå¯¹äºå°äºé˜ˆå€¼ <code>limit</code> çš„å›¾åƒç›´æ¥è½¬åŒ–ä¸º base64 ç¼–ç ï¼›å¤§äºé˜ˆå€¼çš„å›¾åƒåˆ™è°ƒç”¨ <code>file-loader</code> è¿›è¡ŒåŠ è½½ï¼Œä¾‹å¦‚å¦‚ä¸‹é…ç½®ï¼š</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-JnXwo" id="tab-McTQPl6" checked="checked"><label for="tab-McTQPl6">webpack.config.js</label></div><div class="blocks"><div class="language-js active"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#89DDFF;">(</span><span style="color:#C3E88D;">png</span><span style="color:#89DDFF;">|</span><span style="color:#C3E88D;">jpe</span><span style="color:#89DDFF;">?</span><span style="color:#C3E88D;">g</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">loader</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">url-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">options</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">              </span><span style="color:#F07178;">limit</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1024</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        ]</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></div></div><p>ç»è¿‡ <code>url-loader</code> å¤„ç†åï¼Œå°äº <code>limit</code> å‚æ•°å³ 1024B çš„å›¾ç‰‡ä¼šè¢«è½¬è¯‘ä¸º Base64 ç¼–ç ï¼Œå¦‚ï¼š</p><p><img src="`+o+`" alt="url-loader"></p><p>å¯¹äºè¶…è¿‡ <code>limit</code> å€¼çš„å›¾ç‰‡åˆ™ç›´æ¥è°ƒç”¨ <code>file-loader</code> å®ŒæˆåŠ è½½ã€‚</p><p><code>url-loader</code> åŒæ ·é€‚ç”¨äºå¤§å¤šæ•°å›¾ç‰‡æ ¼å¼ï¼Œä¸”èƒ½å°†è®¸å¤šç»†å°çš„å›¾ç‰‡ç›´æ¥å†…åµŒè¿›äº§ç‰©ä¸­ï¼Œå‡å°‘é¡µé¢è¿è¡Œæ—¶éœ€è¦å‘å‡ºçš„ç½‘ç»œè¯·æ±‚æ•°ï¼Œåœ¨ <code>HTTP 1.1</code> åŠä¹‹å‰ç‰ˆæœ¬ä¸­èƒ½å¸¦æ¥æ­£å‘çš„æ€§èƒ½æ”¶ç›Šã€‚</p><h3 id="raw-loader" tabindex="-1">raw-loader <a class="header-anchor" href="#raw-loader" aria-label="Permalink to &quot;raw-loader&quot;">â€‹</a></h3><p><a href="https://v4.webpack.js.org/loaders/raw-loader" target="_blank" rel="noreferrer">raw-loader</a>ï¼šä¸åšä»»ä½•è½¬è¯‘ï¼Œåªæ˜¯ç®€å•å°†æ–‡ä»¶å†…å®¹å¤åˆ¶åˆ°äº§ç‰©ä¸­ï¼Œé€‚ç”¨äº SVG åœºæ™¯ï¼Œä¾‹å¦‚å¦‚ä¸‹é…ç½®ï¼š</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-xLXyH" id="tab--KYB97z" checked="checked"><label for="tab--KYB97z">webpack.config.js</label></div><div class="blocks"><div class="language-js active"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#C3E88D;">svg</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">raw-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></div></div><p>ç»è¿‡ <code>raw-loader</code> å¤„ç†åï¼ŒSVG èµ„æºä¼šè¢«ç›´æ¥å¤åˆ¶æˆå­—ç¬¦ä¸²å½¢å¼ï¼š</p><p><img src="`+e+`" alt="raw-loader"></p><p>é™¤ <code>raw-loader</code> å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ Loader åŠ è½½ SVG èµ„æºï¼š</p><ul><li><a href="https://www.npmjs.com/package/svg-inline-loader" target="_blank" rel="noreferrer">svg-inline-loader</a>ï¼šèƒ½å¤Ÿè‡ªåŠ¨åˆ é™¤ SVG å›¾ç‰‡ä¸­ä¸æ˜¾å¼æ— å…³çš„å„ç§åŸä¿¡æ¯ï¼Œè¾¾åˆ°å‹ç¼©æ•ˆæœï¼›</li><li><a href="https://www.npmjs.com/package/svg-url-loader" target="_blank" rel="noreferrer">svg-url-loader</a>ï¼šä»¥ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/Data_URIs" target="_blank" rel="noreferrer">DataURL</a> æ–¹å¼å¯¼å…¥ SVG å›¾ç‰‡ï¼Œç›¸æ¯”äº Base64 æ›´èŠ‚çœç©ºé—´ï¼›</li><li><a href="https://www.npmjs.com/package/react-svg-loader" target="_blank" rel="noreferrer">react-svg-loader</a>ï¼šå¯¼å…¥ SVG å›¾ç‰‡å¹¶è‡ªåŠ¨è½¬åŒ–ä¸º React ç»„ä»¶å½¢æ€ï¼Œæ•ˆæœç±»ä¼¼ <a href="https://www.npmjs.com/package/@svgr/webpack" target="_blank" rel="noreferrer">@svgr/webpack</a>ï¼›</li><li><a href="https://www.npmjs.com/package/vue-svg-loader" target="_blank" rel="noreferrer">vue-svg-loader</a>ï¼šå¯¼å…¥ SVG å›¾ç‰‡å¹¶è‡ªåŠ¨è½¬åŒ–ä¸º Vue ç»„ä»¶å½¢æ€ã€‚</li></ul><h2 id="åœ¨-webpack-5-ä¸­å¯¼å…¥å›¾åƒ" tabindex="-1">åœ¨ Webpack 5 ä¸­å¯¼å…¥å›¾åƒ <a class="header-anchor" href="#åœ¨-webpack-5-ä¸­å¯¼å…¥å›¾åƒ" aria-label="Permalink to &quot;åœ¨ Webpack 5 ä¸­å¯¼å…¥å›¾åƒ&quot;">â€‹</a></h2><p>ä¸Šè¿° <code>file-loader</code>ã€<code>url-loader</code>ã€<code>raw-loader</code> éƒ½å¹¶ä¸å±€é™äºå¤„ç†å›¾ç‰‡ï¼Œå®ƒä»¬è¿˜å¯ä»¥è¢«ç”¨äºåŠ è½½ä»»æ„ç±»å‹çš„å¤šåª’ä½“æˆ–æ–‡æœ¬æ–‡ä»¶ï¼Œä½¿ç”¨é¢‘ç‡æé«˜ï¼Œå‡ ä¹å·²ç»æˆä¸ºæ ‡é…ç»„ä»¶ï¼æ‰€ä»¥ Webpack5 ç›´æ¥å†…ç½®äº†è¿™äº›èƒ½åŠ›ï¼Œå¼€ç®±å³å¯ä½¿ç”¨ã€‚</p><p>ç”¨æ³•ä¸Šï¼ŒåŸæœ¬éœ€è¦å®‰è£…ã€å¯¼å…¥ Loaderï¼ŒWebpack5 ä¹‹ååªéœ€è¦é€šè¿‡ <code>module.rules.type</code> å±æ€§æŒ‡å®š<a href="https://webpack.js.org/guides/asset-modules/" target="_blank" rel="noreferrer">èµ„æºç±»å‹</a>å³å¯ï¼Œå¯¹æ¯”æ¥çœ‹ï¼š</p><h3 id="type-asset-resource" tabindex="-1">type = &quot;asset/resource&quot; <a class="header-anchor" href="#type-asset-resource" aria-label="Permalink to &quot;type = &quot;asset/resource&quot;&quot;">â€‹</a></h3><p>file-loader å¯¹æ ‡åˆ° type = &quot;asset/resource&quot;</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-cSLuU" id="tab--1JtBpY" checked="checked"><label for="tab--1JtBpY">webpack.config.js</label></div><div class="blocks"><div class="language-js active"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-diff"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#89DDFF;">(</span><span style="color:#C3E88D;">png</span><span style="color:#89DDFF;">|</span><span style="color:#C3E88D;">jpe</span><span style="color:#89DDFF;">?</span><span style="color:#C3E88D;">g</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">file-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">asset/resource</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>asset/resource</code> ç”Ÿæˆçš„æ–‡ä»¶ä¼šä»¥ <code>[hash][ext][query]</code> æ–¹å¼é‡å‘½åï¼Œå¯ä»¥é€šè¿‡ <a href="https://webpack.js.org/configuration/output/#outputassetmodulefilename" target="_blank" rel="noreferrer">output.assetModuleFilename</a> å±æ€§æ§åˆ¶ã€‚</p></div><h3 id="type-asset-inline-type-asset" tabindex="-1">type = &quot;asset/inline&quot; || type = &quot;asset&quot; <a class="header-anchor" href="#type-asset-inline-type-asset" aria-label="Permalink to &quot;type = &quot;asset/inline&quot; || type = &quot;asset&quot;&quot;">â€‹</a></h3><p><code>url-loader</code> å¯¹æ ‡åˆ° <code>type = &quot;asset&quot;</code> æˆ– <code>type = &quot;asset/inline&quot;</code>ï¼š</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-tXfcE" id="tab-JlhtDWF" checked="checked"><label for="tab-JlhtDWF">webpack.config.js</label></div><div class="blocks"><div class="language-js active"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-diff"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#89DDFF;">(</span><span style="color:#C3E88D;">png</span><span style="color:#89DDFF;">|</span><span style="color:#C3E88D;">jpe</span><span style="color:#89DDFF;">?</span><span style="color:#C3E88D;">g</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [  </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">  </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">loader</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">url-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">  </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">options</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">  </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">              </span><span style="color:#F07178;">limit</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1024</span><span style="color:#A6ACCD;">  </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">  </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">  </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">        ]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">  </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">asset</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">parser</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">dataUrlCondition</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// 1kb </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">maxSize</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1024</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></div></div><p>å…¶ä¸­ï¼Œ<a href="https://webpack.js.org/configuration/module/#ruleparserdataurlcondition" target="_blank" rel="noreferrer">module.rules.parser.dataUrlCondition</a> ç”¨äºé™å®šæ–‡ä»¶å¤§å°é˜ˆå€¼ï¼Œå¯¹æ ‡ <code>url-loader</code> çš„ <code>limit</code> å±æ€§ã€‚</p><h3 id="type-asset-source" tabindex="-1">type = &quot;asset/source&quot; <a class="header-anchor" href="#type-asset-source" aria-label="Permalink to &quot;type = &quot;asset/source&quot;&quot;">â€‹</a></h3><p><code>raw-loader</code> å¯¹æ ‡åˆ° <code>type = &quot;asset/source&quot;</code>ï¼š</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-ovKIH" id="tab-Q3WG0Sw" checked="checked"><label for="tab-Q3WG0Sw">webpack.config.js</label></div><div class="blocks"><div class="language-js active"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-diff"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#C3E88D;">svg</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">raw-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">asset/source</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></div></div><p>è¡¥å……ä¸€ä¸‹ï¼Œå¼•å…¥ <code>module.rules.type</code> å¹¶ä¸åªæ˜¯ä¸ºäº†å–ä»£ Loader é‚£ä¹ˆç®€å•ï¼Œæ›´é‡è¦çš„ç›®çš„æ˜¯åœ¨ JavaScript Module ä¹‹å¤–å¢åŠ å¯¹å…¶å®ƒèµ„æº â€”â€” <a href="https://webpack.js.org/guides/asset-modules/" target="_blank" rel="noreferrer">Asset Module</a> çš„åŸç”Ÿæ”¯æŒï¼Œè®© Webpack æœ‰æœºä¼šä»‹å…¥è¿™äº›å¤šåª’ä½“èµ„æºçš„è§£æã€ç”Ÿæˆè¿‡ç¨‹ï¼Œä»è€Œæœ‰æœºä¼šå®ç°æ›´æ ‡å‡†ã€é«˜æ•ˆçš„èµ„æºå¤„ç†æ¨¡å‹ã€‚</p><p>ç›®å‰ <a href="https://webpack.js.org/configuration/module/#ruletype" target="_blank" rel="noreferrer"><code>module.rules.type</code></a> å·²ç»æ”¯æŒ JSONã€WebAssemblyã€äºŒè¿›åˆ¶ã€æ–‡æœ¬ç­‰èµ„æºç±»å‹ï¼Œç›¸ä¿¡åœ¨ä¸‹ä¸€ä¸ª Webpack ç‰ˆæœ¬ä¸­ï¼Œå¿…ç„¶ä¼šåŸºäº Asset Module å®ç°æ›´ä¸°å¯Œçš„èµ„æºå¤„ç†èƒ½åŠ›ğŸ˜ã€‚</p><h2 id="å›¾åƒä¼˜åŒ–" tabindex="-1">å›¾åƒä¼˜åŒ– <a class="header-anchor" href="#å›¾åƒä¼˜åŒ–" aria-label="Permalink to &quot;å›¾åƒä¼˜åŒ–&quot;">â€‹</a></h2><p>å‰é¢ä»‹ç»çš„ Loader ä¸ Asset Modules éƒ½åªæ˜¯è§£å†³äº†å›¾åƒèµ„æºåŠ è½½ â€”â€” ä¹Ÿå°±æ˜¯è®© Webpack èƒ½å¤Ÿç†è§£ã€å¤„ç†å›¾åƒèµ„æºï¼Œç°å®ä¸­æˆ‘ä»¬è¿˜éœ€è¦ä¸º Web é¡µé¢ä¸­çš„å›¾ç‰‡åšå„ç§ä¼˜åŒ–ï¼Œæå‡é¡µé¢æ€§èƒ½ï¼Œå¸¸è§çš„ä¼˜åŒ–æ–¹æ³•åŒ…æ‹¬ï¼š</p><ul><li><strong>å›¾åƒå‹ç¼©</strong>ï¼šå‡å°‘ç½‘ç»œä¸Šéœ€è¦ä¼ è¾“çš„æµé‡ï¼›</li><li><strong>é›ªç¢§å›¾</strong>ï¼šå‡å°‘ HTTP è¯·æ±‚æ¬¡æ•°ï¼›</li><li><strong>å“åº”å¼å›¾ç‰‡</strong>ï¼šæ ¹æ®å®¢æˆ·ç«¯è®¾å¤‡æƒ…å†µä¸‹å‘é€‚å½“åˆ†è¾¨ç‡çš„å›¾ç‰‡ï¼Œæœ‰åŠ©äºå‡å°‘ç½‘ç»œæµé‡ï¼›</li><li><strong>CDN</strong>ï¼šå‡å°‘å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ä¹‹é—´çš„ç‰©ç†é“¾è·¯é•¿åº¦ï¼Œæå‡ä¼ è¾“æ•ˆç‡ï¼›</li><li>ç­‰ç­‰ã€‚</li></ul><p>è¿™å…¶ä¸­æœ‰ä¸å°‘å¯ä»¥åœ¨å¼€å‘ã€æ„å»ºé˜¶æ®µå€ŸåŠ© Webpack æ­å»ºè‡ªåŠ¨ä¼˜åŒ–å·¥ä½œæµï¼Œä¾‹å¦‚ï¼šå›¾åƒå‹ç¼©ã€‚</p><h3 id="å›¾åƒå‹ç¼©" tabindex="-1">å›¾åƒå‹ç¼© <a class="header-anchor" href="#å›¾åƒå‹ç¼©" aria-label="Permalink to &quot;å›¾åƒå‹ç¼©&quot;">â€‹</a></h3><p>åœ¨ Webpack ç”Ÿæ€ä¸­æœ‰ä¸å°‘ä¼˜ç§€çš„å›¾åƒå‹ç¼©ç»„ä»¶ï¼ŒåŒ…æ‹¬ï¼š<a href="https://github.com/tcoopman/image-webpack-loader" target="_blank" rel="noreferrer">image-webpack-loader</a>ã€<a href="https://www.npmjs.com/package/imagemin-webpack-plugin" target="_blank" rel="noreferrer">imagemin-webpack-plugin</a>ã€<a href="https://github.com/webpack-contrib/image-minimizer-webpack-plugin" target="_blank" rel="noreferrer">image-minimizer-webpack-plugin</a> ç­‰ï¼Œä»¥æˆ‘çš„ä½¿ç”¨ç»éªŒæ¥çœ‹ï¼Œ<a href="https://github.com/tcoopman/image-webpack-loader" target="_blank" rel="noreferrer">image-webpack-loader</a> ç»„ä»¶åŠŸèƒ½é½å…¨ä¸”ç”¨æ³•ç®€å•ï¼Œæ›´æ¨èä½¿ç”¨ã€‚åŸºæœ¬ç”¨æ³•é¦–å…ˆå®‰è£…ä¾èµ–ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">image-webpack-loader</span></span></code></pre></div><p>ä¹‹åé…ç½® Loaderï¼š</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-QztOj" id="tab-Ia-crKq" checked="checked"><label for="tab-Ia-crKq">webpack.config.js</label></div><div class="blocks"><div class="language-js active"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#89DDFF;">(</span><span style="color:#C3E88D;">gif</span><span style="color:#89DDFF;">|</span><span style="color:#C3E88D;">png</span><span style="color:#89DDFF;">|</span><span style="color:#C3E88D;">jpe</span><span style="color:#89DDFF;">?</span><span style="color:#C3E88D;">g</span><span style="color:#89DDFF;">|</span><span style="color:#C3E88D;">svg</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">i</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// ğŸš€ type å±æ€§é€‚ç”¨äº Webpack5ï¼Œæ—§ç‰ˆæœ¬å¯ä½¿ç”¨ file-loader</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">asset/resource</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">loader</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">image-webpack-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">options</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// jpegå‹ç¼©é…ç½®</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">mozjpeg</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">              </span><span style="color:#F07178;">quality</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></div></div><p><a href="https://github.com/tcoopman/image-webpack-loader" target="_blank" rel="noreferrer">image-webpack-loader</a> åº•å±‚ä¾èµ–äº <a href="https://github.com/imagemin/imagemin" target="_blank" rel="noreferrer">imagemin</a> åŠä¸€ç³»åˆ—çš„å›¾åƒä¼˜åŒ–å·¥å…·ï¼š</p><ul><li><a href="https://github.com/imagemin/imagemin-mozjpeg" target="_blank" rel="noreferrer">mozjpeg</a>ï¼šç”¨äºå‹ç¼© JPG(JPEG) å›¾ç‰‡ï¼›</li><li><a href="https://github.com/kevva/imagemin-optipng" target="_blank" rel="noreferrer">optipng</a>ï¼šç”¨äºå‹ç¼© PNG å›¾ç‰‡ï¼›</li><li><a href="https://github.com/imagemin/imagemin-pngquant" target="_blank" rel="noreferrer">pngquant</a>ï¼šåŒæ ·ç”¨äºå‹ç¼© PNG å›¾ç‰‡ï¼›</li><li><a href="https://github.com/kevva/imagemin-svgo" target="_blank" rel="noreferrer">svgo</a>ï¼šç”¨äºå‹ç¼© SVG å›¾ç‰‡ï¼›</li><li><a href="https://github.com/kevva/imagemin-gifsicle" target="_blank" rel="noreferrer">gifsicle</a>ï¼šç”¨äºå‹ç¼© Gif å›¾ï¼›</li><li><a href="https://github.com/imagemin/imagemin-webp" target="_blank" rel="noreferrer">webp</a>ï¼šç”¨äºå°† JPG/PNG å›¾å‹ç¼©å¹¶è½¬åŒ–ä¸º WebP å›¾ç‰‡æ ¼å¼ã€‚</li></ul><p>åŸºæœ¬ä¸Šå·²ç»è¦†ç›– Web é¡µé¢å¸¸ç”¨çš„å›¾ç‰‡æ ¼å¼ï¼Œå…·ä½“ç”¨æ³•å¯ç‚¹å‡»ä¸Šè¿°é“¾æ¥æŸ¥é˜…ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚æœ€åè¡¥å……ä¸€ç‚¹ï¼Œå›¾åƒå‹ç¼©æ˜¯ä¸€ç§éå¸¸è€—æ—¶çš„æ“ä½œï¼Œå»ºè®®åªåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹å¼€å¯ï¼š</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-jq7mb" id="tab-buP2dYr" checked="checked"><label for="tab-buP2dYr">webpack.config.js</label></div><div class="blocks"><div class="language-js active"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-diff"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#89DDFF;">(</span><span style="color:#C3E88D;">gif</span><span style="color:#89DDFF;">|</span><span style="color:#C3E88D;">png</span><span style="color:#89DDFF;">|</span><span style="color:#C3E88D;">jpe</span><span style="color:#89DDFF;">?</span><span style="color:#C3E88D;">g</span><span style="color:#89DDFF;">|</span><span style="color:#C3E88D;">svg</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">i</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// ğŸš€ type å±æ€§é€‚ç”¨äº Webpack5ï¼Œæ—§ç‰ˆæœ¬å¯ä½¿ç”¨ file-loader</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">asset/resource</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">loader</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">image-webpack-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">options</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line diff add"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">disable</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> process</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">env</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">NODE_ENV </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">development</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// jpegå‹ç¼©é…ç½®</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">mozjpeg</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">              </span><span style="color:#F07178;">quality</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></div></div><h3 id="é›ªç¢§å›¾" tabindex="-1">é›ªç¢§å›¾ <a class="header-anchor" href="#é›ªç¢§å›¾" aria-label="Permalink to &quot;é›ªç¢§å›¾&quot;">â€‹</a></h3><p>åœ¨ <code>HTTP 2</code> ä¹‹å‰ï¼ŒHTTP è¯·æ±‚-å“åº”æ˜¯ä¸€ç§æ€§èƒ½ä½ä¸‹çš„é€šè®¯æ¨¡å‹ï¼Œå³ä½¿æ˜¯ä¸ºäº†è¯·æ±‚ä¸€ä¸ªéå¸¸å°‘çš„æ•°æ®ï¼Œä¹Ÿå¯èƒ½éœ€è¦å®Œæ•´ç»å†ï¼šå»ºç«‹ TCP è¿æ¥ =&gt; å‘é€ HTTP è¯·æ±‚ =&gt; æœåŠ¡ç«¯å¤„ç† =&gt; è¿”å›å“åº”æ•°æ®æ•´ä¸ªè¿‡ç¨‹ï¼ŒåŠ ä¹‹ HTTP åè®®çš„<strong>é˜Ÿé¦–é˜»å¡ã€æµè§ˆå™¨å¹¶å‘è¯·æ±‚æ•°é™åˆ¶</strong>ç­‰åŸå› ï¼Œè¿«ä½¿æˆ‘ä»¬å¿…é¡»å°½é‡å‡å°‘ HTTP è¯·æ±‚æ•°ä»¥æå‡ç½‘ç»œé€šè®¯æ•ˆç‡ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†è®¸å¤šç»†å°çš„å›¾ç‰‡åˆå¹¶æˆä¸€å¼ å¤§å›¾ â€”â€” ä»è€Œå°†å¤æ•°æ¬¡è¯·æ±‚åˆå¹¶ä¸ºä¸€æ¬¡è¯·æ±‚ï¼Œä¹‹åé…åˆ CSS çš„ <code>background-position</code> æ§åˆ¶å›¾ç‰‡çš„å¯è§†åŒºåŸŸï¼Œè¿™ç§æŠ€æœ¯è¢«ç§°ä½œâ€œ<strong>é›ªç¢§å›¾</strong>â€ã€‚åœ¨ Webpack ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <a href="https://www.npmjs.com/package/webpack-spritesmith" target="_blank" rel="noreferrer">webpack-spritesmith</a> æ’ä»¶è‡ªåŠ¨å®ç°é›ªç¢§å›¾æ•ˆæœï¼Œé¦–å…ˆå®‰è£…ä¾èµ–ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">webpack-spritesmith</span></span></code></pre></div><p>ä¹‹åæ·»åŠ é…ç½®ï¼š</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-fkSUP" id="tab-JIboaUP" checked="checked"><label for="tab-JIboaUP">webpack.config.js</label></div><div class="blocks"><div class="language-js active"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">resolve</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">modules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">node_modules</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">assets</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SpritesmithPlugin</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// éœ€è¦</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">src</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">cwd</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(__dirname</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/icon</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">glob</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*.png</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">target</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(__dirname</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/assets/spite.png</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">css</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(__dirname</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/assets/sprite.less</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  ]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></div></div><p>å…³é”®åœ¨äºï¼Œ<a href="https://www.npmjs.com/package/webpack-spritesmith" target="_blank" rel="noreferrer">webpack-spritesmith</a> æ’ä»¶ä¼šå°† <code>src.cwd</code> ç›®å½•å†…æ‰€æœ‰åŒ¹é… <code>src.glob</code> è§„åˆ™çš„å›¾ç‰‡åˆå¹¶æˆä¸€å¼ å¤§å›¾å¹¶ä¿å­˜åˆ° <code>target.image</code> æŒ‡å®šçš„æ–‡ä»¶è·¯å¾„ï¼ŒåŒæ—¶ç”Ÿæˆå…¼å®¹ SASS/LESS/Stylus é¢„å¤„ç†å™¨çš„ mixins ä»£ç ï¼Œä¾‹å¦‚å¯¹äºä¸‹é¢æ–‡ä»¶ç»“æ„ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">load-img</span></span>
<span class="line"><span style="color:#FFCB6B;">â”œâ”€</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">src</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">â”œâ”€</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">icons</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">â”œâ”€</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">grunt.png</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">â”œâ”€</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gulp-js.png</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">â””â”€</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">webpack.png</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">â””â”€</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.js</span></span>
<span class="line"><span style="color:#FFCB6B;">â”œâ”€</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">webpack.config.js</span></span>
<span class="line"><span style="color:#FFCB6B;">â””â”€</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">package.json</span></span></code></pre></div><p>æŒ‰ç…§ä¸Šè¿°é…ç½®è¿è¡Œåä¼šç”Ÿæˆå¦‚ä¸‹äº§ç‰©ï¼š</p><p><code>src/assets/sprite.png</code></p><p><img src="`+t+`" alt="sprite"></p><p><code>src/assets/sprite.less</code></p><div class="language-less"><button title="Copy Code" class="copy"></button><span class="lang">less</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/* ... */</span></span>
<span class="line"><span style="color:#FFCB6B;">.sprite</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">@</span><span style="color:#A6ACCD;">sprite) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">.sprite-image</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">@</span><span style="color:#A6ACCD;">sprite)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">.sprite-position</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">@</span><span style="color:#A6ACCD;">sprite)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">.sprite-width</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">@</span><span style="color:#A6ACCD;">sprite)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">.sprite-height</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">@</span><span style="color:#A6ACCD;">sprite)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/* ... */</span></span></code></pre></div><p>ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ <code>sprite.less</code> æä¾›çš„ <code>.sprite</code> mixin æ·»åŠ èƒŒæ™¯å›¾ï¼š</p><div class="language-less"><button title="Copy Code" class="copy"></button><span class="lang">less</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">@import</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;font-style:italic;">less</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./assets/sprite.less</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">#</span><span style="color:#F78C6C;">main</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// å‚æ•°ä¸ºåŸå§‹å›¾ç‰‡æ–‡ä»¶å</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">.sprite</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">@</span><span style="color:#A6ACCD;">webpack)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>é›ªç¢§å›¾æ›¾ç»æ˜¯ä¸€ç§ä½¿ç”¨å¹¿æ³›çš„æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯ï¼Œä½† HTTP2 å®ç° TCP å¤šè·¯å¤ç”¨ä¹‹åï¼Œé›ªç¢§å›¾çš„ä¼˜åŒ–æ•ˆæœå·²ç»å¾®ä¹å…¶å¾® â€”â€” ç”šè‡³æ˜¯åä¼˜åŒ–ï¼Œå¯ä»¥é¢„è§éš HTTP2 æ™®åŠç‡çš„æå‡ï¼Œæœªæ¥é›ªç¢§å›¾çš„å¿…è¦æ€§ä¼šè¶Šæ¥è¶Šä½ï¼Œå› æ­¤å»ºè®®è¯»è€…ä»¬äº†è§£ä½œç”¨ä¸åŸºæœ¬åŸç†å³å¯ï¼Œä¸å¿…æ·±ç©¶ã€‚</p></div><h3 id="å“åº”å¼å›¾ç‰‡" tabindex="-1">å“åº”å¼å›¾ç‰‡ <a class="header-anchor" href="#å“åº”å¼å›¾ç‰‡" aria-label="Permalink to &quot;å“åº”å¼å›¾ç‰‡&quot;">â€‹</a></h3><p>ç§»åŠ¨äº’è”ç½‘æ—¶ä»£ï¼Œæˆ‘ä»¬éœ€è¦é¢å¯¹çš„å®¢æˆ·ç«¯è®¾å¤‡è¶Šæ¥è¶Šå¤šæ ·å¤æ‚ï¼Œåˆ†è¾¨ç‡ä» PC åˆ°å¹³æ¿ç”µè„‘å†åˆ°ç§»åŠ¨ç»ˆç«¯è·¨åº¦æå¤§ï¼š</p><p><img src="`+c+`" alt="responsive images"></p><p>è¿™ä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼šåŒä¸€å¼ å›¾ç‰‡(ä¸»è¦æ˜¯ä½å›¾)åœ¨ä¸åŒè®¾å¤‡ä¸­ï¼Œå¦‚æœæ˜¾ç¤ºå°ºå¯¸å¤§äºåŸå§‹å°ºå¯¸ï¼Œæœ€ç»ˆæ•ˆæœä¼šæœ‰æ˜æ˜¾é¢—ç²’æ„Ÿï¼›è€Œå¦‚æœæ˜¾ç¤ºå°ºå¯¸å°äºåŸå§‹å°ºå¯¸ï¼Œåˆä¼šé€ æˆå¸¦å®½æµªè´¹ã€‚ç†æƒ³çš„è§£å†³æ–¹æ¡ˆæ˜¯ä¸ºä¸åŒè®¾å¤‡æä¾›ä¸åŒçš„åˆ†è¾¨ç‡ã€ä¸åŒå°ºå¯¸çš„å›¾ç‰‡ â€”â€” ä¹Ÿå°±æ˜¯æ‰€è°“çš„<a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images" target="_blank" rel="noreferrer">å“åº”å¼å›¾ç‰‡</a>ã€‚</p><p>Webpack ä¸­æœ‰ä¸å°‘èƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆå“åº”å¼å›¾ç‰‡çš„ç»„ä»¶ï¼Œä¾‹å¦‚ï¼š <a href="https://www.npmjs.com/package/resize-image-loader" target="_blank" rel="noreferrer">resize-image-loader</a>ã€<a href="https://www.npmjs.com/package/html-loader-srcset" target="_blank" rel="noreferrer">html-loader-srcset</a>ã€<a href="https://www.npmjs.com/package/responsive-loader" target="_blank" rel="noreferrer">responsive-loader</a> ç­‰ï¼Œä»¥ <a href="https://www.npmjs.com/package/responsive-loader" target="_blank" rel="noreferrer">responsive-loader</a> ä¸ºä¾‹ï¼Œé¦–å…ˆå®‰è£…ä¾èµ–ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">responsive-loader</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sharp</span></span></code></pre></div><p>ä¹‹åï¼Œä¿®æ”¹é…ç½®ï¼š</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-QsjEQ" id="tab-AZC3DNM" checked="checked"><label for="tab-AZC3DNM">webpack.config.js</label></div><div class="blocks"><div class="language-js active"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#89DDFF;">(</span><span style="color:#C3E88D;">png</span><span style="color:#89DDFF;">|</span><span style="color:#C3E88D;">jpe</span><span style="color:#89DDFF;">?</span><span style="color:#C3E88D;">g</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">oneOf</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">javascript/auto</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">resourceQuery</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">sizes</span><span style="color:#89DDFF;">?/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">              </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#F07178;">loader</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">responsive-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#F07178;">options</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#F07178;">adapter</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">responsive-loader/sharp</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">              </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">              type: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">asset/resource</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            ]</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        ]</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></div></div><p>ğŸš¨æ³¨æ„ï¼Œå®è·µä¸­æˆ‘ä»¬é€šå¸¸æ²¡å¿…è¦å¯¹é¡¹ç›®é‡Œæ‰€æœ‰å›¾ç‰‡éƒ½æ–½åŠ å“åº”å¼ç‰¹æ€§ï¼Œå› æ­¤è¿™é‡Œä½¿ç”¨ <code>resourceQuery</code> è¿‡æ»¤å‡ºå¸¦ <code>size/sizes</code> å‚æ•°çš„å›¾ç‰‡å¼•ç”¨ï¼Œä½¿ç”¨æ–¹æ³•ï¼š</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#676E95;font-style:italic;">// å¼•ç”¨å›¾ç‰‡ï¼Œå¹¶è®¾ç½®å“åº”å¼å‚æ•°</span></span>
<span class="line highlighted"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> responsiveImage </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./webpack.jpg?sizes[]=300,sizes[]=600,sizes[]=1024</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> Picture </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">img</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#C792EA;">srcSet</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">responsiveImage</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">srcSet</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">responsiveImage</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">src</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#C792EA;">sizes</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">(min-width: 1024px) 1024px, 100vw</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#C792EA;">loading</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">lazy</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    /&gt;</span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><p>ä¸Šä¾‹çš„å¼•ç”¨å‚æ•° <code>&#39;./webpack.jpg?sizes[]=300,sizes[]=600,sizes[]=1024&#39;;</code> æœ€ç»ˆå°†ç”Ÿæˆå®½åº¦åˆ†åˆ«ä¸º 300ã€600ã€1024 ä¸‰å¼ å›¾ç‰‡ï¼Œä¹‹åè®¾ç½® <code>img</code> æ ‡ç­¾çš„ <a href="https://www.w3schools.com/tags/att_source_srcset.asp" target="_blank" rel="noreferrer">srcset</a> å±æ€§å³å¯å®ç°å›¾ç‰‡å“åº”å¼åŠŸèƒ½ã€‚</p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜èƒ½ç®€å•åœ°é€šè¿‡ <code>size</code> å‚æ•°ç²¾ç¡®æ§åˆ¶ä¸åŒæ¡ä»¶ä¸‹çš„å›¾åƒå°ºå¯¸ï¼š</p><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">background</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">url</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./webpack.jpg?size=1024</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">@media</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">max-width</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">480px</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#B2CCD6;">background</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">url</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./webpack.jpg?size=300</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><ul><li>é™¤æœ¬æ–‡æåŠçš„åŸºæœ¬åŠŸèƒ½å¤–ï¼Œ<a href="https://www.npmjs.com/package/responsive-loader" target="_blank" rel="noreferrer">responsive-loader</a> è¿˜æä¾›äº†è®¸å¤šç”¨äºæ§åˆ¶äº§ç‰©ã€å‹ç¼©æ¯”ç­‰ç‰¹æ€§çš„é…ç½®é¡¹ï¼Œæœ‰éœ€è¦çš„åŒå­¦å¯åˆ° <a href="https://www.npmjs.com/package/responsive-loader" target="_blank" rel="noreferrer">å®˜ç½‘</a> å±•å¼€é˜…è¯»ã€‚</li></ul><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h2><p>åœ¨ Webpack 5 ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>file-loader</code>ã€<code>url-loader</code> ç­‰ Loader åŠ è½½å›¾ç‰‡æˆ–å…¶å®ƒå¤šåª’ä½“èµ„æºæ–‡ä»¶ï¼Œè¿™äº›åŠ è½½å™¨å„æœ‰ä¾§é‡ç‚¹ï¼Œéœ€è¦æ ¹æ®å®é™…åœºæ™¯æ‹©ä¼˜é€‰ç”¨ï¼›è€Œ Webpack 5 ä¹‹åå¼•å…¥äº† <a href="https://webpack.js.org/guides/asset-modules/" target="_blank" rel="noreferrer">Asset Module</a> æ¨¡å‹ï¼Œè‡ªæ­¤æˆ‘ä»¬åªéœ€è¦è®¾ç½®é€‚å½“çš„ <code>module.rules.type</code> é…ç½®å³å¯ï¼Œä¸éœ€è¦ä¸ºå¤šåª’ä½“èµ„æºä¸“é—¨å¼•å…¥ Loaderã€‚</p><p>åœ¨åŠ è½½ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å€ŸåŠ© Webpack ç”Ÿæ€ä¸€ç³»åˆ—ç»„ä»¶ä½æˆæœ¬å®ç°å›¾åƒå‹ç¼©ã€é›ªç¢§å›¾ã€å“åº”å¼å›¾ç‰‡ç­‰ä¼˜åŒ–æªæ–½ï¼Œç›¸å…³æ ·ä¾‹å®ç°å·²æ±‡æ€»åˆ° <a href="https://github1s.com/Tecvan-fe/webpack-book-samples/blob/HEAD/load-img/webpack.config.js" target="_blank" rel="noreferrer">å°å†Œä»“åº“</a>ï¼Œå»ºè®®æ‹‰ä¸‹æ¥ä½“éªŒè¿è¡Œæ•ˆæœã€‚</p><h2 id="æ€è€ƒé¢˜" tabindex="-1">æ€è€ƒé¢˜ <a class="header-anchor" href="#æ€è€ƒé¢˜" aria-label="Permalink to &quot;æ€è€ƒé¢˜&quot;">â€‹</a></h2><p>é™¤äº†æ–‡ç« æåŠçš„å„é¡¹ä¼˜åŒ–æªæ–½å¤–ï¼Œæˆ‘ä»¬è¿˜èƒ½å€ŸåŠ© Webpack å®ç°å“ªäº›å›¾åƒä¼˜åŒ–ï¼Ÿ</p><details class="details custom-block"><summary>chatgptç­”æ¡ˆ</summary><p>é™¤äº†ä¹‹å‰æåˆ°çš„å›¾ç‰‡å‹ç¼©å’Œç”Ÿæˆ webp æ ¼å¼çš„å›¾ç‰‡ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¼˜åŒ–å›¾åƒï¼š</p><ol><li><p>ä½¿ç”¨ image-loader åŠ è½½å›¾ç‰‡æ—¶ï¼Œå¯¹å›¾ç‰‡è¿›è¡Œè‡ªåŠ¨åŒ–çš„å‹ç¼©ã€ç¼©æ”¾ã€å‰ªè£ç­‰æ“ä½œï¼Œä»¥å‡å°‘ç½‘ç»œä¼ è¾“é‡å’Œé¡µé¢åŠ è½½æ—¶é—´ã€‚</p></li><li><p>é‡‡ç”¨æ‡’åŠ è½½æŠ€æœ¯ï¼Œå½“é¡µé¢æ»šåŠ¨åˆ°éœ€è¦æ˜¾ç¤ºå›¾ç‰‡æ—¶å†åŠ è½½ï¼Œå‡å°‘èµ·å§‹é¡µé¢åŠ è½½æ—¶é—´å’Œ HTTP è¯·æ±‚æ¬¡æ•°ã€‚</p></li><li><p>ä½¿ç”¨ CSS3 çš„ background-size å±æ€§å’Œ content å±æ€§è®¾ç½® base64 ç¼–ç çš„å›¾ç‰‡ï¼Œå¯ä»¥å‡å°‘å›¾ç‰‡çš„ HTTP è¯·æ±‚æ¬¡æ•°ï¼Œæé«˜é¡µé¢åŠ è½½é€Ÿåº¦ã€‚</p></li><li><p>ä½¿ç”¨ APP Shell æŠ€æœ¯å°†å¸¸ç”¨çš„å›¾ç‰‡é¢„å…ˆä¸‹è½½å¹¶ç¼“å­˜åˆ°æœ¬åœ°ï¼Œæé«˜ç”¨æˆ·ä½“éªŒå’Œå‡å°‘æµé‡æ¶ˆè€—ã€‚</p></li></ol></details><p>2023å¹´04æœˆ10æ—¥16:41:08</p>`,91),y=[D];function F(i,C,A,d,g,u){return n(),a("div",null,y)}const m=s(r,[["render",F]]);export{h as __pageData,m as default};
