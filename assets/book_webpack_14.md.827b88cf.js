import{_ as s,c as a,o as n,V as l}from"./chunks/framework.478efc10.js";const p="/awesome-node/assets/14-1.12e857e2.webp",d=JSON.parse('{"title":"webpackå¹¶è¡Œæ„å»ºçš„æ–¹å¼","description":"","frontmatter":{"title":"webpackå¹¶è¡Œæ„å»ºçš„æ–¹å¼"},"headers":[],"relativePath":"book/webpack/14.md","lastUpdated":1681982037000}'),o={name:"book/webpack/14.md"},e=l(`<p>å—é™äº Node.js çš„å•çº¿ç¨‹æ¶æ„ï¼ŒåŸç”Ÿ Webpack å¯¹æ‰€æœ‰èµ„æºæ–‡ä»¶åšçš„æ‰€æœ‰è§£æã€è½¬è¯‘ã€åˆå¹¶æ“ä½œæœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨<strong>åŒä¸€ä¸ªçº¿ç¨‹å†…ä¸²è¡Œ</strong>æ‰§è¡Œï¼ŒCPU åˆ©ç”¨ç‡æä½ï¼Œå› æ­¤ï¼Œç†æ‰€å½“ç„¶åœ°ï¼Œç¤¾åŒºå‡ºç°äº†ä¸€äº›ä»¥å¤šè¿›ç¨‹æ–¹å¼è¿è¡Œ Webpackï¼Œæˆ– Webpack æ„å»ºè¿‡ç¨‹æŸéƒ¨åˆ†å·¥ä½œçš„æ–¹æ¡ˆ(ä»è€Œæå‡å•ä½æ—¶é—´åˆ©ç”¨ç‡)ï¼Œä¾‹å¦‚ï¼š</p><ul><li><a href="https://github.com/amireh/happypack" target="_blank" rel="noreferrer">HappyPack</a>ï¼šå¤šè¿›ç¨‹æ–¹å¼è¿è¡Œèµ„æºåŠ è½½(Loader)é€»è¾‘ï¼›</li><li><a href="https://webpack.js.org/loaders/thread-loader/" target="_blank" rel="noreferrer">Thread-loader</a>ï¼šWebpack å®˜æ–¹å‡ºå“ï¼ŒåŒæ ·ä»¥å¤šè¿›ç¨‹æ–¹å¼è¿è¡Œèµ„æºåŠ è½½é€»è¾‘ï¼›</li><li><a href="https://www.npmjs.com/package/parallel-webpack" target="_blank" rel="noreferrer">Parallel-Webpack</a>ï¼šå¤šè¿›ç¨‹æ–¹å¼è¿è¡Œå¤šä¸ª Webpack æ„å»ºå®ä¾‹ï¼›</li><li><a href="https://www.npmjs.com/package/terser-webpack-plugin#terseroptions" target="_blank" rel="noreferrer">TerserWebpackPlugin</a>ï¼šæ”¯æŒå¤šè¿›ç¨‹æ–¹å¼æ‰§è¡Œä»£ç å‹ç¼©ã€uglify åŠŸèƒ½ã€‚</li></ul><p>è¿™äº›æ–¹æ¡ˆçš„æ ¸å¿ƒè®¾è®¡éƒ½å¾ˆç±»ä¼¼ï¼šé’ˆå¯¹æŸç§è®¡ç®—ä»»åŠ¡åˆ›å»ºå­è¿›ç¨‹ï¼Œä¹‹åå°†è¿è¡Œæ‰€éœ€å‚æ•°é€šè¿‡ <code>IPC</code> ä¼ é€’åˆ°å­è¿›ç¨‹å¹¶å¯åŠ¨è®¡ç®—æ“ä½œï¼Œè®¡ç®—å®Œæ¯•åå­è¿›ç¨‹å†å°†ç»“æœé€šè¿‡ IPC ä¼ é€’å›ä¸»è¿›ç¨‹ï¼Œå¯„å®¿åœ¨ä¸»è¿›ç¨‹çš„ç»„ä»¶å®ä¾‹ï¼Œå†å°†ç»“æœæäº¤ç»™ Webpackã€‚</p><h2 id="happypack-å·²åœæ­¢ç»´æŠ¤" tabindex="-1">HappyPack(å·²åœæ­¢ç»´æŠ¤) <a class="header-anchor" href="#happypack-å·²åœæ­¢ç»´æŠ¤" aria-label="Permalink to &quot;HappyPack(å·²åœæ­¢ç»´æŠ¤)&quot;">â€‹</a></h2><p><a href="https://github.com/amireh/happypack" target="_blank" rel="noreferrer">HappyPack</a> èƒ½å¤Ÿå°†è€—æ—¶çš„<strong>æ–‡ä»¶åŠ è½½</strong>ï¼ˆLoaderï¼‰æ“ä½œæ‹†æ•£åˆ°å¤šä¸ªå­è¿›ç¨‹ä¸­å¹¶å‘æ‰§è¡Œï¼Œå­è¿›ç¨‹æ‰§è¡Œå®Œæ¯•åå†å°†ç»“æœåˆå¹¶å›ä¼ åˆ° Webpack è¿›ç¨‹ï¼Œä»è€Œæå‡æ„å»ºæ€§èƒ½ã€‚ä¸è¿‡ï¼ŒHappyPack çš„ç”¨æ³•ç¨å¾®æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œéœ€è¦åŒæ—¶ï¼š</p><ul><li>ä½¿ç”¨ <code>happypack/loader</code> ä»£æ›¿åŸæœ¬çš„ Loader åºåˆ—ï¼›</li><li>ä½¿ç”¨ <code>HappyPack</code> æ’ä»¶æ³¨å…¥ä»£ç†æ‰§è¡Œ Loader åºåˆ—çš„é€»è¾‘ã€‚</li></ul><p>åŸºæœ¬ç”¨æ³•ï¼š</p><ol><li><p>å®‰è£…ä¾èµ–</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">happypack</span></span></code></pre></div></li><li><p>å°†åŸæœ‰ <code>loader</code> é…ç½®æ›¿æ¢ä¸º <code>happypack/loader</code>ï¼Œå¦‚ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-diff"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">type</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">import(&#39;webpack&#39;).Configuration</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mode</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">development</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">devtool</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">entry</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./src/index.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#C3E88D;">js</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line diff add"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">happypack/loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// åŸå§‹é…ç½®å¦‚ï¼š</span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [  </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">loader</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">babel-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">options</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">              </span><span style="color:#F07178;">presets</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@babel/preset-env</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">] </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">eslint-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">        ] </span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></li><li><p>åˆ›å»º <code>happypack</code> æ’ä»¶å®ä¾‹ï¼Œå¹¶å°†åŸæœ‰ loader é…ç½®è¿ç§»åˆ°æ’ä»¶ä¸­ï¼Œå®Œæ•´é…ç½®ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-diff"><code><span class="line diff add"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> HappyPack </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">happypack</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">type</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">import(&#39;webpack&#39;).Configuration</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mode</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">development</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">devtool</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">entry</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./src/index.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#C3E88D;">js</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line diff add"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">happypack/loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [  </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">loader</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">babel-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">options</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">              </span><span style="color:#F07178;">presets</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@babel/preset-env</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">] </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">eslint-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">        ] </span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line diff add"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [  </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">HappyPack</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// å°†åŸæœ¬å®šä¹‰åœ¨ \`module.rules.use\` ä¸­çš„ Loader é…ç½®è¿ç§»åˆ° HappyPack å®ä¾‹ä¸­</span></span>
<span class="line diff add"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">loaders</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [  </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">  </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">loader</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">babel-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">  </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">options</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">  </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">presets</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@babel/preset-env</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]  </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">eslint-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">      ] </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">) </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">  ] </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></li></ol><p>é…ç½®å®Œæ¯•åï¼Œå†æ¬¡å¯åŠ¨ <code>npx webpack</code> å‘½ä»¤ï¼Œå³å¯ä½¿ç”¨ HappyPack çš„å¤šè¿›ç¨‹èƒ½åŠ›æå‡æ„å»ºæ€§èƒ½ã€‚ä»¥ Three.js ä¸ºä¾‹ï¼Œè¯¥é¡¹ç›®åŒ…å« 362 ä»½ JS æ–‡ä»¶ï¼Œåˆè®¡çº¦ 3w è¡Œä»£ç ã€‚</p><p>å¼€å¯ HappyPack å‰ï¼Œæ„å»ºè€—æ—¶å¤§çº¦ä¸º 11000ms åˆ° 18000ms ä¹‹é—´ï¼Œå¼€å¯åè€—æ—¶é™ä½åˆ° 5800ms åˆ° 8000ms ä¹‹é—´ï¼Œæå‡çº¦47%ã€‚</p><p>ä¸Šè¿°ç¤ºä¾‹ä»…æ¼”ç¤ºäº†ä½¿ç”¨ HappyPack åŠ è½½å•ä¸€èµ„æºç±»å‹çš„åœºæ™¯ï¼Œå®è·µä¸­æˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºå¤šä¸ª HappyPack æ’ä»¶å®ä¾‹ï¼Œæ¥åŠ è½½å¤šç§èµ„æºç±»å‹ â€”â€” åªéœ€è¦ç”¨ <code>id</code> å‚æ•°åšå¥½ Loader ä¸ Plugin å®ä¾‹çš„å…³è”å³å¯ï¼Œä¾‹å¦‚ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> HappyPack </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">happypack</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#C3E88D;">js</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// ä½¿ç”¨ \`id\` å‚æ•°æ ‡è¯†è¯¥ Loader å¯¹åº”çš„ HappyPack æ’ä»¶ç¤ºä¾‹</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">happypack/loader?id=js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#C3E88D;">less</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">happypack/loader?id=styles</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">HappyPack</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// æ³¨æ„è¿™é‡Œè¦æ˜ç¡®æä¾› id å±æ€§</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">loader</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">babel-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">eslint-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">HappyPack</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">styles</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">loaders</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">style-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">css-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">less-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  ]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>è¿™é‡Œçš„é‡ç‚¹æ˜¯ï¼š</p><ul><li><code>js</code>ã€<code>less</code> èµ„æºéƒ½ä½¿ç”¨ <code>happypack/loader</code> ä½œä¸ºå”¯ä¸€åŠ è½½å™¨ï¼Œå¹¶åˆ†åˆ«èµ‹äºˆ <code>id = &#39;js&#39; | &#39;styles&#39;</code> å‚æ•°ï¼›</li><li>åˆ›å»ºäº†ä¸¤ä¸ª <code>HappyPack</code> æ’ä»¶å®ä¾‹å¹¶åˆ†åˆ«é…ç½® <code>id</code> å±æ€§ï¼Œä»¥åŠç”¨äºå¤„ç† js ä¸ css çš„ <code>loaders</code> æ•°ç»„ï¼›</li><li>å¯åŠ¨åï¼Œ<code>happypack/loader</code> ä¸ <code>HappyPack</code> æ’ä»¶å®ä¾‹å°†é€šè¿‡ <code>id</code> å€¼äº§ç”Ÿå…³è”ï¼Œä»¥æ­¤å®ç°å¯¹ä¸åŒèµ„æºæ‰§è¡Œä¸åŒ Loader åºåˆ—ã€‚</li></ul><p>ä¸Šé¢è¿™ç§å¤šå®ä¾‹æ¨¡å¼è™½ç„¶èƒ½åº”å¯¹å¤šç§ç±»å‹èµ„æºçš„åŠ è½½éœ€æ±‚ï¼Œä½†é»˜è®¤æƒ…å†µä¸‹ï¼ŒHappyPack æ’ä»¶å®ä¾‹ <strong>è‡ªè¡Œç®¡ç†</strong> è‡ªèº«æ‰€æ¶ˆè´¹çš„è¿›ç¨‹ï¼Œéœ€è¦å¯¼è‡´é¢‘ç¹åˆ›å»ºã€é”€æ¯è¿›ç¨‹å®ä¾‹ â€”â€” è¿™æ˜¯éå¸¸æ˜‚è´µçš„æ“ä½œï¼Œåè€Œä¼šå¸¦æ¥æ–°çš„æ€§èƒ½æŸè€—ã€‚</p><p>ä¸ºæ­¤ï¼ŒHappyPack æä¾›äº†ä¸€å¥—ç®€å•æ˜“ç”¨çš„å…±äº«è¿›ç¨‹æ± æ¥å£ï¼Œåªéœ€è¦åˆ›å»º <code>HappyPack.ThreadPool</code> å¯¹è±¡ï¼Œå¹¶é€šè¿‡ <code>size</code> å‚æ•°é™å®šè¿›ç¨‹æ€»é‡ï¼Œä¹‹åå°†è¯¥ä¾‹é…ç½®åˆ°å„ä¸ª HappyPack æ’ä»¶çš„ <code>threadPool</code> å±æ€§ä¸Šå³å¯ï¼Œä¾‹å¦‚ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-diff"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> HappyPack </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">happypack</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> os </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">node:os</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// è®¾ç½®è¿›ç¨‹æ± å¤§å°</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> happyThreadPool </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> HappyPack</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ThreadPool</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">size</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> os</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">cpus</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#C3E88D;">js</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// ä½¿ç”¨ \`id\` å‚æ•°æ ‡è¯†è¯¥ Loader å¯¹åº”çš„ HappyPack æ’ä»¶ç¤ºä¾‹</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">happypack/loader?id=js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#C3E88D;">less</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">happypack/loader?id=styles</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">HappyPack</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// æ³¨æ„è¿™é‡Œè¦æ˜ç¡®æä¾› id å±æ€§</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line diff add"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">threadPool</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> happyThreadPool</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">loader</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">babel-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">eslint-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">HappyPack</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">styles</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line diff add"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">threadPool</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> happyThreadPool</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">loaders</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">style-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">css-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">less-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  ]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>ä½¿ç”¨ <code>HappyPack.ThreadPool</code> æ¥å£åï¼ŒHappyPack ä¼šé¢„å…ˆåˆ›å»ºå¥½ä¸€ç»„å·¥ä½œè¿›ç¨‹ï¼Œæ‰€æœ‰æ’ä»¶å®ä¾‹çš„èµ„æºè½¬è¯‘ä»»åŠ¡ä¼šé€šè¿‡å†…ç½®çš„ <code>HappyThread</code> å¯¹è±¡è½¬å‘åˆ°ç©ºé—²è¿›ç¨‹åšå¤„ç†ï¼Œé¿å…é¢‘ç¹åˆ›å»ºã€é”€æ¯è¿›ç¨‹ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹ HappyPack çš„æ‰§è¡Œæµç¨‹ï¼š</p><p><img src="`+p+`" alt="HappyPackæµç¨‹"></p><p>æ ¸å¿ƒæ­¥éª¤ï¼š</p><ol><li><code>happypack/loader</code> æ¥å—åˆ°è½¬è¯‘è¯·æ±‚åï¼Œä» Webpack é…ç½®ä¸­è¯»å–å‡ºç›¸åº” HappyPack æ’ä»¶å®ä¾‹ï¼›</li><li>è°ƒç”¨æ’ä»¶å®ä¾‹çš„ <code>compile</code> æ–¹æ³•ï¼Œåˆ›å»º <code>HappyThread</code> å®ä¾‹ï¼ˆæˆ–ä» <code>HappyThreadPool</code> å–å‡ºç©ºé—²å®ä¾‹ï¼‰ï¼›</li><li><code>HappyThread</code> å†…éƒ¨è°ƒç”¨ <code>child_process.fork</code> åˆ›å»ºå­è¿›ç¨‹ï¼Œå¹¶æ‰§è¡Œ<code>HappyWorkerChannel</code> æ–‡ä»¶ï¼›</li><li><code>HappyWorkerChannel</code> åˆ›å»º <code>HappyWorker</code> ï¼Œå¼€å§‹æ‰§è¡Œ Loader è½¬è¯‘é€»è¾‘ï¼›</li></ol><p>ä¸­é—´æµç¨‹è¾—è½¬äº†å‡ å±‚ï¼Œæœ€ç»ˆç”± <code>HappyWorker</code> ç±»é‡æ–°å®ç°äº†ä¸€å¥—ä¸ Webpack Loader ç›¸ä¼¼çš„è½¬è¯‘é€»è¾‘ï¼Œä»£ç å¤æ‚åº¦è¾ƒé«˜ï¼Œå¤§å®¶ç¨ä½œäº†è§£å³å¯ã€‚</p><p>HappyPack è™½ç„¶ç¡®å®èƒ½æœ‰æ•ˆæå‡ Webpack çš„æ‰“åŒ…æ„å»ºé€Ÿåº¦ï¼Œä½†å®ƒæœ‰ä¸€äº›æ˜æ˜¾çš„ç¼ºç‚¹ï¼š</p><ul><li>ä½œè€…å·²ç»æ˜ç¡®è¡¨ç¤ºä¸ä¼šç»§ç»­ç»´æŠ¤ï¼Œæ‰©å±•æ€§ä¸ç¨³å®šæ€§ç¼ºä¹ä¿éšœï¼Œéšç€ Webpack æœ¬èº«çš„å‘å±•è¿­ä»£ï¼Œå¯ä»¥é¢„è§æ€»æœ‰ä¸€å¤© HappyPack æ— æ³•å®Œå…¨å…¼å®¹ WebpackğŸ˜…ï¼›</li><li>HappyPack åº•å±‚ä»¥è‡ªå·±çš„æ–¹å¼é‡æ–°å®ç°äº†åŠ è½½å™¨é€»è¾‘ï¼Œæºç ä¸ä½¿ç”¨æ–¹æ³•éƒ½ä¸å¦‚ Thread-loader æ¸…çˆ½ç®€å•ï¼Œè€Œä¸”ä¼šå¯¼è‡´ä¸€äº›æ„æƒ³ä¸åˆ°çš„å…¼å®¹æ€§é—®é¢˜ï¼Œå¦‚ <code>awesome-typescript-loader</code>ï¼›</li><li>HappyPack ä¸»è¦ä½œç”¨äºæ–‡ä»¶åŠ è½½é˜¶æ®µï¼Œå¹¶ä¸ä¼šå½±å“åç»­çš„äº§ç‰©ç”Ÿæˆã€åˆå¹¶ã€ä¼˜åŒ–ç­‰åŠŸèƒ½ï¼Œæ€§èƒ½æ”¶ç›Šæœ‰é™ã€‚</li></ul><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>å®æµ‹ <code>webapck v5.79.0</code> &amp; <code>happypack v5.0.1</code> ç‰ˆæœ¬æ„å»ºæ—¶ä¼šæŠ¥é”™ï¼Œ<a href="https://github.com/amireh/happypack/issues/275" target="_blank" rel="noreferrer">build error#275</a></p></div><h2 id="thread-loader" tabindex="-1">Thread-loader <a class="header-anchor" href="#thread-loader" aria-label="Permalink to &quot;Thread-loader&quot;">â€‹</a></h2><p><a href="https://webpack.docschina.org/loaders/thread-loader/" target="_blank" rel="noreferrer">Thread-loader</a> ä¸ HappyPack åŠŸèƒ½ç±»ä¼¼ï¼Œéƒ½æ˜¯ä»¥å¤šè¿›ç¨‹æ–¹å¼åŠ è½½æ–‡ä»¶çš„ Webpack ç»„ä»¶ï¼Œä¸¤è€…ä¸»è¦åŒºåˆ«ï¼š</p><ul><li>Thread-loader ç”± Webpack å®˜æ–¹æä¾›ï¼Œç›®å‰è¿˜å¤„äºæŒç»­è¿­ä»£ç»´æŠ¤çŠ¶æ€ï¼Œç†è®ºä¸Šæ›´å¯é ï¼›</li><li>Thread-loader åªæä¾›äº†ä¸€ä¸ª Loader ç»„ä»¶ï¼Œç”¨æ³•ç®€å•å¾ˆå¤šï¼›</li><li>HappyPack å¯åŠ¨åä¼šåˆ›å»ºä¸€å¥— Mock ä¸Šä¸‹æ–‡ç¯å¢ƒ â€”â€” åŒ…å« <code>emitFile</code> ç­‰æ¥å£ï¼Œå¹¶ä¼ é€’ç»™ Loaderï¼Œå› æ­¤å¯¹å¤§å¤šæ•° Loader æ¥è¯´ï¼Œè¿è¡Œåœ¨ HappyPack ä¸è¿è¡Œåœ¨ Webpack åŸç”Ÿç¯å¢ƒç›¸æ¯”æ²¡æœ‰å¤ªå¤§å·®å¼‚ï¼›ä½† Thread-loader å¹¶ä¸å…·å¤‡è¿™ä¸€ç‰¹æ€§ï¼Œæ‰€ä»¥è¦æ±‚ Loader å†…ä¸èƒ½è°ƒç”¨ç‰¹å®šä¸Šä¸‹æ–‡æ¥å£ï¼Œå…¼å®¹æ€§è¾ƒå·®ğŸ˜…ã€‚</li></ul><p>è¯´ä¸€åƒé“ä¸€ä¸‡ï¼Œå…ˆæ¥çœ‹çœ‹åŸºæœ¬ç”¨æ³•ï¼š</p><ol><li><p>å®‰è£…ä¾èµ–ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">thread-loader</span></span></code></pre></div></li><li><p>å°† Thread-loader æ”¾åœ¨ <code>use</code> æ•°ç»„<strong>é¦–ä½</strong>ï¼Œç¡®ä¿æœ€å…ˆè¿è¡Œï¼Œå¦‚ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#C3E88D;">js</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">thread-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">babel-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">eslint-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></li></ol><p>å¯åŠ¨åï¼ŒThread-loader ä¼šåœ¨åŠ è½½æ–‡ä»¶æ—¶åˆ›å»ºæ–°çš„è¿›ç¨‹ï¼Œåœ¨å­è¿›ç¨‹ä¸­ä½¿ç”¨ <code>loader-runner</code> åº“è¿è¡Œ <code>thread-loader</code> ä¹‹åçš„ Loader ç»„ä»¶ï¼Œæ‰§è¡Œå®Œæ¯•åå†å°†ç»“æœå›ä¼ åˆ° Webpack ä¸»è¿›ç¨‹ï¼Œä»è€Œå®ç°æ€§èƒ½æ›´ä½³çš„æ–‡ä»¶åŠ è½½è½¬è¯‘æ•ˆæœã€‚</p><p>ä»¥ Three.js ä¸ºä¾‹ï¼Œä½¿ç”¨ Thread-loader å‰ï¼Œæ„å»ºè€—æ—¶å¤§çº¦ä¸º 11000ms åˆ° 18000ms ä¹‹é—´ï¼Œå¼€å¯åè€—æ—¶é™ä½åˆ° 8000ms å·¦å³ï¼Œæå‡çº¦37%ã€‚</p><p>æ­¤å¤–ï¼ŒThread-loader è¿˜æä¾›äº†ä¸€ç³»åˆ—ç”¨äºæ§åˆ¶å¹¶å‘é€»è¾‘çš„é…ç½®é¡¹ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li><code>workers</code>ï¼šå­è¿›ç¨‹æ€»æ•°ï¼Œé»˜è®¤å€¼ä¸º <code>require(&#39;os&#39;).cpus() - 1</code>ï¼›</li><li><code>workerParallelJobs</code>ï¼šå•ä¸ªè¿›ç¨‹ä¸­å¹¶å‘æ‰§è¡Œçš„ä»»åŠ¡æ•°ï¼›</li><li><code>poolTimeout</code>ï¼šå­è¿›ç¨‹å¦‚æœä¸€ç›´ä¿æŒç©ºé—²çŠ¶æ€ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´åä¼šè¢«å…³é—­ï¼›</li><li><code>poolRespawn</code>ï¼šæ˜¯å¦å…è®¸åœ¨å­è¿›ç¨‹å…³é—­åé‡æ–°åˆ›å»ºæ–°çš„å­è¿›ç¨‹ï¼Œä¸€èˆ¬è®¾ç½®ä¸º <code>false</code> å³å¯ï¼›</li><li><code>workerNodeArgs</code>ï¼šç”¨äºè®¾ç½®å¯åŠ¨å­è¿›ç¨‹æ—¶ï¼Œé¢å¤–é™„åŠ çš„å‚æ•°ã€‚</li></ul><p>ä½¿ç”¨æ–¹æ³•è·Ÿå…¶å®ƒ Loader ä¸€æ ·ï¼Œéƒ½æ˜¯é€šè¿‡ <code>use.options</code> å±æ€§ä¼ é€’ï¼Œå¦‚ï¼š</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-q-g9R" id="tab-YKPxrBo" checked="checked"><label for="tab-YKPxrBo">webpack.config.js</label></div><div class="blocks"><div class="language-js active"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#C3E88D;">js</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">use</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">loader</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">thread-loader</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">options</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">              </span><span style="color:#F07178;">workers</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">              </span><span style="color:#F07178;">workerParallelJobs</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">50</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">              </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">babel-loader</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">eslint-loader</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div></div></div><p>ä¸è¿‡ï¼ŒThread-loader ä¹ŸåŒæ ·é¢ä¸´ç€é¢‘ç¹çš„å­è¿›ç¨‹åˆ›å»ºã€é”€æ¯æ‰€å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ï¼Œä¸ºæ­¤ï¼ŒThread-loader æä¾›äº† <code>warmup</code> æ¥å£ç”¨äºå‰ç½®åˆ›å»ºè‹¥å¹²å·¥ä½œå­è¿›ç¨‹ï¼Œé™ä½æ„å»ºæ—¶å»¶ï¼Œç”¨æ³•ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> threadLoader </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">thread-loader</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">threadLoader</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">warmup</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å¯ä¼ å…¥ä¸Šè¿° thread-loader å‚æ•°</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">workers</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">workerParallelJobs</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">50</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  [</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å­è¿›ç¨‹ä¸­éœ€è¦é¢„åŠ è½½çš„ node æ¨¡å—</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">babel-loader</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">babel-preset-es2015</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">sass-loader</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  ]</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>æ‰§è¡Œæ•ˆæœä¸ <code>HappyPack.ThreadPool</code> ç›¸ä¼¼ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚</p><p>ä¸ HappyPack ç›¸æ¯”ï¼ŒThread-loader æœ‰ä¸¤ä¸ªçªå‡ºçš„ä¼˜ç‚¹ï¼Œä¸€æ˜¯äº§è‡ª Webpack å®˜æ–¹å›¢é˜Ÿï¼Œåç»­æœ‰é•¿æœŸç»´æŠ¤è®¡åˆ’ï¼Œç¨³å®šæ€§æœ‰ä¿éšœï¼›äºŒæ˜¯ç”¨æ³•æ›´ç®€å•ã€‚ä½†å®ƒä¸å¯é¿å…çš„ä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ï¼š</p><ul><li>åœ¨ Thread-loader ä¸­è¿è¡Œçš„ Loader ä¸èƒ½è°ƒç”¨ <code>emitAsset</code> ç­‰æ¥å£ï¼Œè¿™ä¼šå¯¼è‡´ <code>style-loader</code> è¿™ä¸€ç±»åŠ è½½å™¨æ— æ³•æ­£å¸¸å·¥ä½œï¼Œè§£å†³æ–¹æ¡ˆæ˜¯å°†è¿™ç±»ç»„ä»¶æ”¾ç½®åœ¨ <code>thread-loader</code> ä¹‹å‰ï¼Œå¦‚ <code>[&#39;style-loader&#39;, &#39;thread-loader&#39;, &#39;css-loader&#39;]</code>ï¼›</li><li>Loader ä¸­ä¸èƒ½è·å– <code>compilation</code>ã€<code>compiler</code> ç­‰å®ä¾‹å¯¹è±¡ï¼Œä¹Ÿæ— æ³•è·å– Webpack é…ç½®ã€‚</li></ul><p>è¿™ä¼šå¯¼è‡´ä¸€äº› Loader æ— æ³•ä¸ Thread-loader å…±åŒä½¿ç”¨ï¼Œå¤§å®¶éœ€è¦ä»”ç»†åŠ ä»¥ç”„åˆ«ã€æµ‹è¯•ã€‚</p><h2 id="parallel-webpack" tabindex="-1">Parallel-Webpack <a class="header-anchor" href="#parallel-webpack" aria-label="Permalink to &quot;Parallel-Webpack&quot;">â€‹</a></h2><p>Thread-loaderã€HappyPack è¿™ç±»ç»„ä»¶æ‰€æä¾›çš„å¹¶è¡Œèƒ½åŠ›éƒ½ä»…ä½œç”¨äºæ–‡ä»¶åŠ è½½è¿‡ç¨‹ï¼Œå¯¹åç»­ AST è§£æã€ä¾èµ–æ”¶é›†ã€æ‰“åŒ…ã€ä¼˜åŒ–ä»£ç ç­‰è¿‡ç¨‹å‡æ²¡æœ‰å½±å“ï¼Œç†è®ºæ”¶ç›Šè¿˜æ˜¯æ¯”è¾ƒæœ‰é™çš„ã€‚å¯¹æ­¤ï¼Œç¤¾åŒºè¿˜æä¾›äº†å¦ä¸€ç§å¹¶è¡Œåº¦æ›´é«˜ï¼Œä»¥å¤šä¸ªç‹¬ç«‹è¿›ç¨‹è¿è¡Œ Webpack å®ä¾‹çš„æ–¹æ¡ˆ â€”â€” <a href="https://github.com/trivago/parallel-webpack" target="_blank" rel="noreferrer">Parallel-Webpack</a>ï¼ŒåŸºæœ¬ç”¨æ³•ï¼š</p><ol><li><p>å®‰è£…ä¾èµ–ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">parallel-webpack</span></span></code></pre></div></li><li><p>åœ¨ <code>webpack.config.js</code> é…ç½®æ–‡ä»¶ä¸­å¯¼å‡ºå¤šä¸ª Webpack é…ç½®å¯¹è±¡ï¼Œå¦‚ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">entry</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pageA.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./dist</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">filename</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pageA.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">entry</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pageB.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./dist</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">filename</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pageB.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">]</span></span></code></pre></div></li><li><p>æ‰§è¡Œ <code>npx parallel-webpack</code> å‘½ä»¤</p></li></ol><p>Parallel-Webpack ä¼šä¸ºé…ç½®æ–‡ä»¶ä¸­å¯¼å‡ºçš„æ¯ä¸ª Webpack é…ç½®å¯¹è±¡å¯åŠ¨ä¸€ä¸ªç‹¬ç«‹çš„æ„å»ºè¿›ç¨‹ï¼Œä»è€Œå®ç°å¹¶è¡Œç¼–è¯‘çš„æ•ˆæœã€‚åº•å±‚åŸç†å¾ˆç®€å•ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯åœ¨ Webpack ä¸Šå¥—äº†ä¸ªå£³ï¼š</p><ul><li>æ ¹æ®ä¼ å…¥çš„é…ç½®é¡¹æ•°é‡ï¼Œè°ƒç”¨ <code>worker-farm</code> åˆ›å»ºå¤æ•°ä¸ªå·¥ä½œè¿›ç¨‹ï¼›</li><li>å·¥ä½œè¿›ç¨‹å†…è°ƒç”¨ Webpack æ‰§è¡Œæ„å»ºï¼›</li><li>å·¥ä½œè¿›ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œè°ƒç”¨ <code>node-ipc</code> å‘ä¸»è¿›ç¨‹å‘é€ç»“æŸä¿¡å·ã€‚</li></ul><p>è¿™ç§æ–¹å¼åœ¨éœ€è¦åŒæ—¶æ‰§è¡Œå¤šä»½é…ç½®çš„ç¼–è¯‘æ—¶ç‰¹åˆ«æœ‰æ•ˆï¼Œä½†è‹¥é…ç½®æ–‡ä»¶æœ¬èº«åªæ˜¯å¯¼å‡ºäº†å•ä¸ªé…ç½®å¯¹è±¡åˆ™æ„ä¹‰ä¸å¤§ã€‚</p><p>ä¸ºäº†æ›´å¥½åœ°æ”¯æŒå¤šç§é…ç½®çš„ç¼–è¯‘ï¼ŒParallel-Webpack è¿˜æä¾›äº† <code>createVariants</code> å‡½æ•°ï¼Œç”¨äºæ ¹æ®ç»™å®šå˜é‡ç»„åˆï¼Œç”Ÿæˆå¤šä»½ Webpack é…ç½®å¯¹è±¡ï¼Œå¦‚ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> createVariants </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">parallel-webpack</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">createVariants</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> webpack </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">webpack</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> baseOptions </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">entry</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./index.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// é…ç½®å˜é‡ç»„åˆ</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// å±æ€§åä¸º webpack é…ç½®å±æ€§ï¼›å±æ€§å€¼ä¸ºå¯é€‰çš„å˜é‡</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ä¸‹è¿°å˜é‡ç»„åˆå°†æœ€ç»ˆäº§ç”Ÿ 2*2*4 = 16 ç§å½¢æ€çš„é…ç½®å¯¹è±¡</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> variants </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">minified</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">debug</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">target</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">commonjs2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">var</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">umd</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">amd</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createConfig</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">options</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">plugins</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> [</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">webpack</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">DefinePlugin</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      DEBUG</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">debug</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  ]</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    output</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      path</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./dist/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      filename</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MyLib.</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">target</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span></span>
<span class="line"><span style="color:#F07178;">                (</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">minified</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.min</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">+</span></span>
<span class="line"><span style="color:#F07178;">                (</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">debug</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.debug</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">+</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">    plugins</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">plugins</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createVariants</span><span style="color:#A6ACCD;">(baseOptions</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> variants</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> createConfig)</span></span></code></pre></div><p>ä¸Šè¿°ç¤ºä¾‹ä½¿ç”¨ <code>createVariants</code> å‡½æ•°ï¼Œæ ¹æ® <code>variants</code> å˜é‡æ­é…å‡º 16 ç§ä¸åŒçš„ <code>minified</code>ã€<code>debug</code>ã€<code>target</code> ç»„åˆï¼Œæœ€ç»ˆç”Ÿæˆå¦‚ä¸‹äº§ç‰©ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Building </span><span style="color:#F78C6C;">16</span><span style="color:#A6ACCD;"> targets </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#A6ACCD;"> parallel</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Started building MyLib.umd.js</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Started building MyLib.umd.min.js</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Started building MyLib.umd.debug.js</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Started building MyLib.umd.min.debug.js</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Started building MyLib.amd.js</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Started building MyLib.amd.min.js</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Started building MyLib.amd.debug.js</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Started building MyLib.amd.min.debug.js</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Started building MyLib.commonjs2.js</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Started building MyLib.commonjs2.min.js</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Started building MyLib.commonjs2.debug.js</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Started building MyLib.commonjs2.min.debug.js</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Started building MyLib.var.js</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Started building MyLib.var.min.js</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Started building MyLib.var.debug.js</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">WEBPACK</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Started building MyLib.var.min.debug.js</span></span></code></pre></div><p>è™½ç„¶ï¼Œparallel-webpack ç›¸å¯¹äº Thread-loaderã€HappyPack æœ‰æ›´é«˜çš„å¹¶è¡Œåº¦ï¼Œä½†è¿›ç¨‹å®ä¾‹ä¹‹é—´å¹¶æ²¡æœ‰åšä»»ä½•å½¢å¼çš„é€šè®¯ï¼Œè¿™å¯èƒ½å¯¼è‡´ç›¸åŒçš„å·¥ä½œåœ¨ä¸åŒè¿›ç¨‹ â€”â€” æˆ–è€…è¯´ä¸åŒ CPU æ ¸ä¸Šè¢«é‡å¤æ‰§è¡Œã€‚</p><p>ä¾‹å¦‚éœ€è¦å¯¹åŒä¸€ä»½ä»£ç åŒæ—¶æ‰“åŒ…å‡ºå‹ç¼©å’Œéå‹ç¼©ç‰ˆæœ¬æ—¶ï¼Œåœ¨ parallel-webpack æ–¹æ¡ˆä¸‹ï¼Œå‰ç½®çš„èµ„æºåŠ è½½ã€ä¾èµ–è§£æã€AST åˆ†æç­‰æ“ä½œä¼šè¢«é‡å¤æ‰§è¡Œï¼Œä»…ä»…æœ€ç»ˆé˜¶æ®µç”Ÿæˆä»£ç æ—¶æœ‰æ‰€å·®å¼‚ã€‚</p><p>è¿™ç§æŠ€æœ¯å®ç°ï¼Œå¯¹å• entry çš„é¡¹ç›®æ²¡æœ‰ä»»ä½•æ”¶ç›Šï¼Œåªä¼šå¾’å¢è¿›ç¨‹åˆ›å»ºæˆæœ¬ï¼›<strong>ä½†ç‰¹åˆ«é€‚åˆ MPA ç­‰å¤š entry åœºæ™¯ï¼Œæˆ–è€…éœ€è¦åŒæ—¶ç¼–è¯‘å‡º esmã€umdã€amd ç­‰å¤šç§äº§ç‰©å½¢æ€çš„ç±»åº“åœºæ™¯ğŸ‰ã€‚</strong></p><h2 id="å¹¶è¡Œå‹ç¼©" tabindex="-1">å¹¶è¡Œå‹ç¼© <a class="header-anchor" href="#å¹¶è¡Œå‹ç¼©" aria-label="Permalink to &quot;å¹¶è¡Œå‹ç¼©&quot;">â€‹</a></h2><p>Webpack4 é»˜è®¤ä½¿ç”¨ <a href="https://www.npmjs.com/package/uglifyjs-webpack-plugin" target="_blank" rel="noreferrer">Uglify-js</a> å®ç°ä»£ç å‹ç¼©ï¼ŒWebpack5 ä¹‹ååˆ™å‡çº§ä¸º <a href="https://webpack.js.org/plugins/terser-webpack-plugin/" target="_blank" rel="noreferrer">Terser</a> â€”â€” ä¸€ç§<a href="https://blog.logrocket.com/terser-vs-uglify-vs-babel-minify-comparing-javascript-minifiers/" target="_blank" rel="noreferrer">æ€§èƒ½</a>ä¸å…¼å®¹æ€§æ›´å¥½çš„ JavaScript ä»£ç å‹ç¼©æ··æ·†å·¥å…·ï¼Œä¸¤ç§ç»„ä»¶éƒ½åŸç”Ÿå®ç°äº†å¤šè¿›ç¨‹å¹¶è¡Œå‹ç¼©èƒ½åŠ›ã€‚</p><p>ä»¥ Terser ä¸ºä¾‹ï¼ŒTerserWebpackPlugin æ’ä»¶é»˜è®¤å·²å¼€å¯å¹¶è¡Œå‹ç¼©ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥é€šè¿‡ <code>parallel</code> å‚æ•°ï¼ˆé»˜è®¤å€¼ä¸º <code>require(&#39;os&#39;).cpus() - 1</code>ï¼‰è®¾ç½®å…·ä½“çš„å¹¶å‘è¿›ç¨‹æ•°é‡ï¼Œå¦‚ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> TerserPlugin </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">terser-webpack-plugin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">optimization</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">minimize</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">minimizer</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">TerserPlugin</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">parallel</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// number | boolean</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>ä¸Šè¿°é…ç½®å³å¯è®¾å®šæœ€å¤§å¹¶è¡Œè¿›ç¨‹æ•°ä¸º 2ã€‚æ­¤å¤–ï¼ŒWebpack4 æ‰€ä½¿ç”¨çš„ <code>uglifyjs-webpack-plugin</code> ä¹Ÿæä¾›äº†ç±»ä¼¼çš„åŠŸèƒ½ï¼Œç”¨æ³•ä¸ Terser ç›¸åŒï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚</p><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h2><p>å—é™äº JavaScript çš„å•çº¿ç¨‹æ¶æ„ï¼ŒWebpack æ„å»ºæ—¶å¹¶ä¸èƒ½å……åˆ†ä½¿ç”¨ç°ä»£è®¡ç®—æœºçš„å¤šæ ¸ CPU èƒ½åŠ›ï¼Œä¸ºæ­¤ç¤¾åŒºæä¾›äº†è‹¥å¹²åŸºäºå¤šè¿›ç¨‹å®ç°çš„å¹¶è¡Œæ„å»ºç»„ä»¶ï¼ŒåŒ…æ‹¬æ–‡ä¸­ä»‹ç»çš„ HappyPackã€Thread-loaderã€Parallel-Webpackã€Terserã€‚</p><ul><li>å¯¹äº Webpack4 ä¹‹å‰çš„é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨ HappyPack å®ç°å¹¶è¡Œæ–‡ä»¶åŠ è½½ï¼›</li><li>Webpack4 ä¹‹ååˆ™å»ºè®®ä½¿ç”¨ Thread-loaderï¼›</li><li>å¤šå®ä¾‹å¹¶è¡Œæ„å»ºåœºæ™¯å»ºè®®ä½¿ç”¨ Parallel-Webpack å®ç°å¹¶è¡Œï¼›</li><li>ç”Ÿäº§ç¯å¢ƒä¸‹è¿˜å¯é…åˆ <code>terser-webpack-plugin</code> çš„å¹¶è¡Œå‹ç¼©åŠŸèƒ½ï¼Œæå‡æ•´ä½“æ•ˆç‡ã€‚</li></ul><p>ç†è®ºä¸Šï¼Œå¹¶è¡Œç¡®å®èƒ½å¤Ÿæå‡ç³»ç»Ÿè¿è¡Œæ•ˆç‡ï¼Œä½† Node å•çº¿ç¨‹æ¶æ„ä¸‹ï¼Œæ‰€è°“çš„å¹¶è¡Œè®¡ç®—éƒ½åªèƒ½ä¾æ‰˜ä¸æ´¾ç”Ÿå­è¿›ç¨‹æ‰§è¡Œï¼Œè€Œåˆ›å»ºè¿›ç¨‹è¿™ä¸ªåŠ¨ä½œæœ¬èº«å°±æœ‰ä¸å°çš„æ¶ˆè€— â€”â€” å¤§çº¦ 600msï¼Œå¯¹äºå°å‹é¡¹ç›®ï¼Œæ„å»ºæˆæœ¬å¯èƒ½å¯èƒ½å¾ˆä½ï¼Œå¼•å…¥å¤šè¿›ç¨‹æŠ€æœ¯åè€Œå¯¼è‡´æ•´ä½“æˆæœ¬å¢åŠ ï¼Œå› æ­¤å»ºè®®å¤§å®¶æŒ‰å®é™…éœ€æ±‚æ–Ÿé…Œä½¿ç”¨ä¸Šè¿°å¤šè¿›ç¨‹æ–¹æ¡ˆã€‚</p><h2 id="æ€è€ƒé¢˜" tabindex="-1">æ€è€ƒé¢˜ <a class="header-anchor" href="#æ€è€ƒé¢˜" aria-label="Permalink to &quot;æ€è€ƒé¢˜&quot;">â€‹</a></h2><p>æœ‰æ²¡æœ‰å¯èƒ½ä½¿ç”¨ Node <a href="https://nodejs.org/api/worker_threads.html" target="_blank" rel="noreferrer">Worker</a> å®ç°å¤šçº¿ç¨‹å½¢å¼çš„ Webpack å¹¶è¡Œæ„å»ºï¼Ÿç¤¾åŒºæ˜¯å¦å·²ç»æœ‰ç›¸å…³ç»„ä»¶ï¼Ÿä¸å¤šè¿›ç¨‹ç›¸æ¯”ï¼Œå¯èƒ½å­˜åœ¨æ€ä¹ˆæ ·çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</p><details class="details custom-block"><summary>chatgptå›ç­”</summary><p>1ï¸âƒ£ <strong>æœ‰æ²¡æœ‰å¯èƒ½ä½¿ç”¨ Node Workerå®ç°å¤šçº¿ç¨‹å½¢å¼çš„ Webpack å¹¶è¡Œæ„å»ºï¼Ÿ</strong></p><p>æ˜¯çš„ï¼Œå¯ä»¥ä½¿ç”¨ Node.js çš„ Worker Threads æ¨¡å—æ¥å®ç°å¤šçº¿ç¨‹å½¢å¼çš„ Webpack å¹¶è¡Œæ„å»ºã€‚Worker Threads å¯ä»¥åˆ›å»ºå¤šä¸ª Node.js å­çº¿ç¨‹ï¼Œå¹¶åœ¨è¿™äº›å­çº¿ç¨‹ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œä»è€Œæé«˜ç¨‹åºçš„æ€§èƒ½ã€‚</p><p>å…·ä½“åœ°ï¼Œå¯ä»¥å°† Webpack æ„å»ºè¿‡ç¨‹æ‹†åˆ†æˆå¤šä¸ªå­ä»»åŠ¡ï¼Œç„¶åå°†æ¯ä¸ªå­ä»»åŠ¡æ”¾åˆ°ä¸åŒçš„å­çº¿ç¨‹ä¸­è¿›è¡Œå¤„ç†ã€‚æ¯ä¸ªå­çº¿ç¨‹å¯ä»¥ç‹¬ç«‹åœ°è¿›è¡Œæ¨¡å—çš„è§£æã€åŠ è½½å’Œè½¬æ¢ç­‰æ“ä½œï¼Œæœ€åå†å°†ç»“æœåˆå¹¶èµ·æ¥ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Worker Threads å®ç°å¤šçº¿ç¨‹å½¢å¼çš„ Webpack å¹¶è¡Œæ„å»ºï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> Worker</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> isMainThread</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> parentPort </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">worker_threads</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> webpack </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">webpack</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// å®šä¹‰ Webpack é…ç½®</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> config </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">entry</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/index.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">filename</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bundle.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> __dirname </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/dist</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (isMainThread) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ä¸»çº¿ç¨‹è´Ÿè´£å¯åŠ¨å­çº¿ç¨‹</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">worker</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Worker</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">__filename</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">worker</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">message</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">result</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// å­çº¿ç¨‹è´Ÿè´£æ‰§è¡Œ Webpack æ„å»º</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">webpack</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">err</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">stats</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">stats</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">hasErrors</span><span style="color:#F07178;">()) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">parentPort</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">postMessage</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> error</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">stats</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toJson</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">errors</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">parentPort</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">postMessage</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> result</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Build completed successfully!</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ Worker Threads æ„å»º Webpack æ˜¯ä¸€ç§æ¯”è¾ƒåº•å±‚çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œéœ€è¦è€ƒè™‘åˆ°çº¿ç¨‹å®‰å…¨ã€è¿›ç¨‹é—´é€šä¿¡ç­‰é—®é¢˜ã€‚åŒæ—¶ï¼Œä¹Ÿéœ€è¦æ ¹æ®å…·ä½“é¡¹ç›®çš„éœ€æ±‚å’Œç¡¬ä»¶ç¯å¢ƒï¼Œæƒè¡¡ä½¿ç”¨å¤šçº¿ç¨‹å¸¦æ¥çš„æ€§èƒ½æå‡å’Œä»£ç å¤æ‚åº¦å¢åŠ çš„é£é™©ã€‚</p><p>2ï¸âƒ£ <strong>ç¤¾åŒºæ˜¯å¦å·²ç»æœ‰ç›¸å…³ç»„ä»¶ï¼Ÿ</strong></p><p>æ˜¯çš„ï¼Œç¤¾åŒºå·²ç»æœ‰ä¸€äº›ç›¸å…³çš„ç»„ä»¶å¯ä»¥å®ç° Webpack çš„å¤šçº¿ç¨‹æ„å»ºã€‚ä»¥ä¸‹æ˜¯å…¶ä¸­æ¯”è¾ƒå¸¸è§çš„å‡ ç§ç»„ä»¶ï¼š</p><ol><li>thread-loader</li></ol><p>thread-loader æ˜¯ä¸€ä¸ª Webpack Loaderï¼Œå®ƒå¯ä»¥å°†å…¶ä»– Loader æ‰§è¡Œè¿‡ç¨‹æ”¾åˆ° Worker çº¿ç¨‹ä¸­è¿›è¡Œï¼Œä»è€Œæé«˜æ„å»ºé€Ÿåº¦ã€‚ä½¿ç”¨ thread-loader åªéœ€è¦åœ¨åŸæœ‰ Loader çš„åŸºç¡€ä¸ŠåŠ ä¸Š thread-loader å³å¯ã€‚</p><ol start="2"><li>parallel-webpack</li></ol><p>parallel-webpack å¯ä»¥è®© Webpack æ”¯æŒå¤šè¿›ç¨‹å¹¶è¡Œæ„å»ºï¼Œä»è€Œæé«˜æ„å»ºé€Ÿåº¦ã€‚parallel-webpack ä½¿ç”¨ Node.js çš„ Child Process API æ¥åˆ›å»ºå­è¿›ç¨‹ï¼Œå¹¶åˆ©ç”¨ IPC å®ç°è¿›ç¨‹é—´é€šä¿¡ã€‚</p><ol start="3"><li>happypack</li></ol><p>happypack æ˜¯ä¸€ä¸ª Webpack Pluginï¼Œå®ƒå¯ä»¥å°†å¤šä¸ª Loader çš„æ‰§è¡Œè¿‡ç¨‹æ”¾åˆ° Worker çº¿ç¨‹ä¸­è¿›è¡Œï¼Œä»è€Œæé«˜æ„å»ºé€Ÿåº¦ã€‚happypack çš„åŸç†ä¸ thread-loader ç±»ä¼¼ï¼Œä½†æ˜¯ happypack å¯ä»¥æ”¯æŒæ›´å¤æ‚çš„ Loader é“¾ã€‚</p><ol start="4"><li>webpack-parallel-uglify-plugin</li></ol><p>webpack-parallel-uglify-plugin æ˜¯ä¸€ä¸ªå‹ç¼© JavaScript ä»£ç çš„ Webpack Pluginï¼Œå®ƒå¯ä»¥ä½¿ç”¨å¤šè¿›ç¨‹å¹¶è¡Œæ–¹å¼å‹ç¼©æ–‡ä»¶ï¼Œä»è€Œæé«˜å‹ç¼©é€Ÿåº¦ã€‚</p><p>ä»¥ä¸Šç»„ä»¶éƒ½å¯ä»¥æœ‰æ•ˆåœ°æé«˜ Webpack çš„æ„å»ºé€Ÿåº¦ï¼Œå…·ä½“é€‰æ‹©å“ªä¸ªç»„ä»¶å–å†³äºé¡¹ç›®çš„éœ€æ±‚å’Œå¼€å‘è€…çš„ä¸ªäººå–œå¥½ã€‚</p><p>3ï¸âƒ£ <strong>ä¸å¤šè¿›ç¨‹ç›¸æ¯”ï¼Œå¯èƒ½å­˜åœ¨æ€ä¹ˆæ ·çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</strong></p><p>ä½¿ç”¨å¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹æ¥å®ç° Webpack çš„å¹¶è¡Œæ„å»ºï¼Œéƒ½æœ‰å…¶ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Œä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„ä¼˜ç¼ºç‚¹ï¼š</p><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ol><li>æé«˜æ„å»ºé€Ÿåº¦ï¼šå¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œä»è€Œæé«˜æ„å»ºé€Ÿåº¦ã€‚</li><li>å……åˆ†åˆ©ç”¨ CPU èµ„æºï¼šå¯¹äºè®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼Œå¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹å¯ä»¥å……åˆ†åˆ©ç”¨ CPU èµ„æºï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</li><li>æ‰©å±•æ€§å¥½ï¼šå¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹çš„æ–¹æ¡ˆå…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§ï¼Œå¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚å¢åŠ æˆ–å‡å°‘è¿›ç¨‹æ•°ç›®ï¼Œä»è€Œé€‚åº”ä¸åŒçš„ç¡¬ä»¶ç¯å¢ƒå’Œå·¥ä½œè´Ÿè½½ã€‚</li></ol><p><strong>ç¼ºç‚¹ï¼š</strong></p><ol><li>å¢åŠ å¤æ‚åº¦ï¼šä½¿ç”¨å¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹ä¼šå¢åŠ ä»£ç çš„å¤æ‚åº¦ï¼Œéœ€è¦è€ƒè™‘åˆ°çº¿ç¨‹å®‰å…¨ã€è¿›ç¨‹é—´é€šä¿¡ç­‰é—®é¢˜ã€‚</li><li>éœ€è¦é¢å¤–é…ç½®ï¼šç”±äºå¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹éœ€è¦ä¸ Webpack è‰¯å¥½åœ°é›†æˆï¼Œå› æ­¤éœ€è¦è¿›è¡Œé¢å¤–çš„é…ç½®ï¼Œå¯èƒ½ä¼šå¢åŠ å¼€å‘éš¾åº¦ã€‚</li><li>å¯èƒ½å¯¼è‡´å†…å­˜æ¶ˆè€—è¿‡å¤§ï¼šå½“è¿›ç¨‹æ•°é‡è¿‡å¤šæ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ¶ˆè€—è¿‡å¤§ï¼Œä»è€Œå½±å“ç³»ç»Ÿç¨³å®šæ€§å’Œæ€§èƒ½ã€‚</li></ol><p>æ€»çš„æ¥è¯´ï¼Œä½¿ç”¨å¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹æ¥å®ç° Webpack çš„å¹¶è¡Œæ„å»ºæ˜¯ä¸€ç§æœ‰æ•ˆçš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œå¯ä»¥æ˜¾è‘—æé«˜æ„å»ºé€Ÿåº¦å’Œæ€§èƒ½ã€‚ä½†æ˜¯éœ€è¦æƒè¡¡å…¶ä¼˜ç¼ºç‚¹ï¼Œæ ¹æ®å…·ä½“é¡¹ç›®çš„éœ€æ±‚å’Œç¡¬ä»¶ç¯å¢ƒé€‰æ‹©æœ€é€‚åˆçš„ä¼˜åŒ–æ–¹æ¡ˆã€‚</p></details><p>2023å¹´04æœˆ18æ—¥11:47:16</p>`,69),c=[e];function t(r,D,y,F,C,A){return n(),a("div",null,c)}const b=s(o,[["render",t]]);export{d as __pageData,b as default};
